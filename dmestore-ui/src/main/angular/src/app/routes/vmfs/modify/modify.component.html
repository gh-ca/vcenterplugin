<clr-modal class="add-wizard-wrap" [(clrModalOpen)]="modifyShow" [clrModalClosable]="false">
  <div class="modal-body">
    <div *ngIf="modalLoading" class="loadingDiv">
      <span>
        {{'vmfs.loadingTips' | translate}}<img src="./assets/images/loading.gif"  width="20px" height="20px" style="margin-left: 20px;">
      </span>
    </div>
    <div *ngIf="modalHandleLoading" class="loadingDiv">
        <span>
          {{'vmfs.dataHandleLoadingTips' | translate}}<img src="./assets/images/loading.gif"  width="20px" height="20px" style="margin-left: 20px;">
        </span>
    </div>
    <form clrForm >
      <div *ngIf="isOperationErr" class="errorTips" readonly ><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'errorMsg.modifyError' | translate}}</div>
      <!-- 名称 -->
      <clr-input-container>
        <label style="color: #9F9F9F;">{{'vmfs.name' | translate}}</label>
        <input clrInput  [(ngModel)]="modifyForm.name" name="name" #name="ngModel" required/><br>
        <clr-control-error>{{'validations.required' | translate}}</clr-control-error>
      </clr-input-container>
      <clr-checkbox-container>
        <label></label>
        <clr-checkbox-wrapper>
          <input type="checkbox" clrCheckbox name="isSameName" [(ngModel)]="modifyForm.isSameName" />
          <label>{{'vmfs.modifyNameDesc' | translate}}</label>
        </clr-checkbox-wrapper>
      </clr-checkbox-container>

      <!-- 控制策略 -->
      <clr-radio-container clrInline *ngIf="!isServiceLevelData">
        <label style="color: #9F9F9F;">{{'vmfs.controlPolicy' | translate}}</label>
        <clr-radio-wrapper>
          <input type="radio" clrRadio name="control_policyUpper" checked="checked" value="1" [(ngModel)]="modifyForm.control_policy" />
          <label>{{'vmfs.upperLimitControl' | translate}}</label>
        </clr-radio-wrapper>
        <clr-radio-wrapper>
          <input type="radio" clrRadio name="control_policyLower" value="0" [(ngModel)]="modifyForm.control_policy" />
          <label>{{'vmfs.lowerLimitControl' | translate}}</label>
        </clr-radio-wrapper>
      </clr-radio-container>
      <!-- 交通管制对象 带宽 上限-->
      <clr-checkbox-container *ngIf="modifyForm.control_policy === '1' && !isServiceLevelData">
        <label style="color: #9F9F9F;">{{'vmfs.trafficControlObject' | translate}}</label>
        <clr-checkbox-wrapper>
          <input type="checkbox" [(ngModel)]="modifyForm.maxbandwidthChoose" name="maxbandwidthChoose" clrCheckbox/>
          <label>
            {{'vmfs.bandwidthLimitUpper' | translate}}
            <input type="number" [(readOnly)]="!modifyForm.maxbandwidthChoose" class="inputOneLine" name="max_bandwidth"
                   [(ngModel)]="modifyForm.max_bandwidth" (blur)="qosBlur('modify', 'max_bandwidth');"/>{{'vmfs.unitM' | translate}}
          </label>
        </clr-checkbox-wrapper>
      </clr-checkbox-container>
      <!-- 交通管制对象 IOPS 上限-->
      <clr-checkbox-container *ngIf="modifyForm.control_policy === '1' && !isServiceLevelData">
        <label></label>
        <clr-checkbox-wrapper>
          <input type="checkbox" [(ngModel)]="modifyForm.maxiopsChoose" name="maxiopsChoose" clrCheckbox/>
          <label>
            {{'vmfs.IOPSLimitUpper' | translate}}
            <input type="number" [(readOnly)]="!modifyForm.maxiopsChoose" class="inputOneLine" name="max_iops"
                   [(ngModel)]="modifyForm.max_iops" (blur)="qosBlur('modify', 'max_iops');"/>
          </label>
        </clr-checkbox-wrapper>
      </clr-checkbox-container>

      <!-- 交通管制对象 带宽 下限-->
      <clr-checkbox-container *ngIf="modifyForm.control_policy === '0' && !isServiceLevelData">
        <label style="color: #9F9F9F;">{{'vmfs.trafficControlObject' | translate}}</label>
        <clr-checkbox-wrapper>
          <input type="checkbox" [(ngModel)]="modifyForm.minbandwidthChoose" name="minbandwidthChoose" clrCheckbox/>
          <label>
            {{'vmfs.bandwidthLimitLower' | translate}}
            <input type="number" [(readOnly)]="!modifyForm.minbandwidthChoose" class="inputOneLine" name="min_bandwidth"
                   [(ngModel)]="modifyForm.min_bandwidth" (blur)="qosBlur('modify', 'min_bandwidth');"/>{{'vmfs.unitM' | translate}}
          </label>
        </clr-checkbox-wrapper>
      </clr-checkbox-container>
      <!-- 交通管制对象 IOPS 下限-->
      <clr-checkbox-container *ngIf="modifyForm.control_policy === '0' && !isServiceLevelData">
        <label></label>
        <clr-checkbox-wrapper>
          <input type="checkbox" [(ngModel)]="modifyForm.miniopsChoose" name="miniopsChoose" clrCheckbox/>
          <label>
            {{'vmfs.IOPSLimitLower' | translate}}
            <input type="number" [(readOnly)]="!modifyForm.miniopsChoose" class="inputOneLine" name="min_iops"
                   [(ngModel)]="modifyForm.min_iops" (blur)="qosBlur('modify', 'min_iops');"/>
          </label>
        </clr-checkbox-wrapper>
      </clr-checkbox-container>
      <!-- 交通管制对象 latency 时延-->
      <clr-checkbox-container *ngIf="modifyForm.control_policy === '0' && !isServiceLevelData">
        <label></label>
        <clr-checkbox-wrapper>
          <input type="checkbox" [(ngModel)]="modifyForm.latencyChoose" name="latencyChoose" clrCheckbox/>
          <label>
            {{'vmfs.latencyMax' | translate}}
            <input type="number" [(readOnly)]="!modifyForm.latencyChoose" class="inputOneLine" name="latency"
                   [(ngModel)]="modifyForm.latency" (blur)="qosBlur('modify', 'latency');"/>{{'vmfs.latencyUnit' | translate}}
          </label>
        </clr-checkbox-wrapper>
      </clr-checkbox-container>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline" (click)="cancel();">{{'menu.cancel' | translate}}</button>
    <button type="submit" class="btn btn-primary" (click)="modifyHandleFunc()">{{'menu.ok' | translate}}</button>
  </div>
</clr-modal>
<!--操作成功提示-->
<clr-modal [(clrModalOpen)]="modifySuccessShow" [clrModalSize]="'sm'" [clrModalClosable]="false">
  <h3 class="modal-title modelTile">{{'vmfs.reclaim.title' | translate}}</h3>
  <div class="modal-body">
    <p *ngIf="modifySuccessShow">{{'vmfs.modify.success' | translate}}</p>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="modifySuccessShow = false;">{{'menu.ok' | translate}}</button>
  </div>
</clr-modal>
