<div>
  <!-- 头部按钮组 -->
  <div class="gh-btngroup-header">
    <div class="gh-btngroup-left">
      <button class="btn btn-primary" (click)="addView()">{{'menu.add' | translate}}</button>
      <button class="btn btn-primary" [disabled]="rowSelected.length !== 1" (click)="modifyData()">{{'menu.modify' | translate}}</button>
      <button class="btn btn-primary" [disabled]="rowSelected.length !== 1" (click)="expandView()">{{'menu.expand' | translate}}</button>
      <clr-dropdown [clrCloseMenuOnItemClick]="true">
        <button clrDropdownTrigger class="btn btn-primary" aria-label="Dropdown demo button">
          {{'menu.more' | translate}}
          <clr-icon shape="caret down"></clr-icon>
        </button>
        <clr-dropdown-menu *clrIfOpen>
          <div aria-label="Dropdown header Action 1" [disabled]="rowSelected.length !== 1" clrDropdownItem  (click)="reduceView();" >{{'menu.reduce' | translate}}</div>
          <div class="dropdown-divider" role="separator" aria-hidden="true"></div>
          <div aria-label="Dropdown header Action 2" [disabled]="rowSelected.length !== 1" clrDropdownItem (click)="mount();"> {{'menu.mount' | translate}}</div>
          <div aria-label="Dropdown header Action 2" [disabled]="rowSelected.length !== 1" clrDropdownItem (click)="unmountBtnFunc();">{{'menu.unmount' | translate}}</div>
          <div class="dropdown-divider" role="separator" aria-hidden="true"></div>
          <div aria-label="Dropdown header Action 2" [disabled]="rowSelected.length == 0" clrDropdownItem (click)="delBtnFunc();">{{'menu.del' | translate}}</div>
          <div aria-label="Dropdown header Action 2" clrDropdownItem (click)="scanDataStore();">{{'menu.Synchronize' | translate}}</div>
        </clr-dropdown-menu>
      </clr-dropdown>
    </div>
    <div class="btn-group btn-icon" title="{{'menu.conventional' | translate}}">
      <div class="radio btn">
        <input (click)="radioCheck = 'list'" type="radio" name="btn-group-demo-radios" id="btn-demo-radio-1" checked>
        <label for="btn-demo-radio-1"><clr-icon shape="list" size="20"></clr-icon></label>
      </div>
      <div class="radio btn" title="{{'menu.performance' | translate}}">
        <input (click)="radioCheck = 'chart'" type="radio" name="btn-group-demo-radios" id="btn-demo-radio-2">
        <label for="btn-demo-radio-2"><clr-icon shape="dashboard" size="20"></clr-icon></label>
      </div>
      <div class="radio btn merginLeft" title="{{'menu.refresh' | translate}}">
        <!--<input type="radio" name="btn-group-demo-radios" id="btn-demo-radio-3">-->
        <label><clr-icon shape="refresh" size="20" (click)="getNfsList()"></clr-icon></label>
      </div>
    </div>
  </div>
  <!-- 列表页 -->
  <div style="width: 100%;">
    <clr-datagrid id="nfs-grid" [(clrDgSelected)]="rowSelected" [clrDgLoading]="isLoading">
      <clr-dg-column [clrDgField]="'name'">{{'nfs.name' | translate}}</clr-dg-column>

      <clr-dg-column [hidden]="radioCheck!=='list'" >
        {{'nfs.status' | translate}}
        <clr-dg-filter [clrDgFilter]="statusFilter">
          <status-filter #statusFilter></status-filter>
        </clr-dg-filter>
      </clr-dg-column>
      <clr-dg-column #capacity [hidden]="radioCheck!=='list'" class="hideFilter" [clrDgField]="'capacity'" style="position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.totalCapacity' | translate}}
        <clr-icon *ngIf="sortFunc(capacity.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>
      <clr-dg-column #freeSpace [hidden]="radioCheck!=='list'" class="hideFilter" [clrDgField]="'freeSpace'" style="position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.freeCapacity' | translate}}
        <clr-icon *ngIf="sortFunc(freeSpace.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>
      <clr-dg-column #capacityUsage [hidden]="radioCheck!=='list'" class="hideFilter" [clrDgField]="'capacityUsage'" style="min-width:11rem;position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.capacityUsage' | translate}}
        <clr-icon *ngIf="sortFunc(capacityUsage.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>
      <clr-dg-column #reserveCapacity [hidden]="radioCheck!=='list'" class="hideFilter" [clrDgField]="'reserveCapacity'" style="position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.provisioningCapacity' | translate}}
        <clr-icon *ngIf="sortFunc(reserveCapacity.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>
      <clr-dg-column #deviceFilter [hidden]="radioCheck!=='list'" [clrDgField]="'device'">
        {{'vmfs.device' | translate}}
        <clr-dg-filter [clrDgFilter]="deviceFilter">
          <device-filter #deviceFilter></device-filter>
        </clr-dg-filter>
      </clr-dg-column>
      <clr-dg-column [hidden]="radioCheck!=='list'" [clrDgField]="'logicPort'">{{'nfs.logicPort' | translate}}</clr-dg-column>
      <clr-dg-column [hidden]="radioCheck!=='list'" [clrDgField]="'shareIp'">{{'nfs.shareIp' | translate}}</clr-dg-column>
      <clr-dg-column [hidden]="radioCheck!=='list'" [clrDgField]="'sharePath'">{{'nfs.sharePath' | translate}}</clr-dg-column>
      <clr-dg-column [hidden]="radioCheck!=='list'" [clrDgField]="'fs'">{{'nfs.fileSystem' | translate}}</clr-dg-column>

      <clr-dg-column #ops [hidden]="radioCheck!=='chart'" class="hideFilter" [clrDgField]="'ops'" style="position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.ops' | translate}}
        <clr-icon *ngIf="sortFunc(ops.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>
      <clr-dg-column #bandwidth [hidden]="radioCheck!=='chart'" class="hideFilter" [clrDgField]="'bandwidth'" style="position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.bandwidth' | translate}}
        <clr-icon *ngIf="sortFunc(bandwidth.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>
      <clr-dg-column #readResponseTime [hidden]="radioCheck!=='chart'" class="hideFilter" [clrDgField]="'readResponseTime'" style="position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.respRt' | translate}}
        <clr-icon *ngIf="sortFunc(readResponseTime.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>
      <clr-dg-column #writeResponseTime [hidden]="radioCheck!=='chart'" class="hideFilter" [clrDgField]="'writeResponseTime'" style="position: relative" (clrDgSortedChange)="sortFunc($event);">
        {{'nfs.respWt' | translate}}
        <clr-icon *ngIf="sortFunc(writeResponseTime.sorted);" shape="arrow down" class="is-solid" style="position: absolute;right: 1.1rem;"></clr-icon>
      </clr-dg-column>

      <clr-dg-placeholder>{{'tips.noData' | translate}}</clr-dg-placeholder>
      <clr-dg-row *clrDgItems="let item of list" [clrDgItem]="item">
        <clr-dg-cell class="over_flow" (click)="navigateTo(item.objectid)" style="color:#829DE6;cursor:pointer">{{item.name ? item.name:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" style="width: 5%" [hidden]="radioCheck!=='list'">
          <span *ngIf="item.status == 'normal'">
                <span class="color-square" style="background-color: #7CDFA0; margin-right: 10px"></span>
                <span>{{'enum.status.normal' | translate}}</span>
          </span>
          <span *ngIf="item.status == 'faulty'">
                <span class="color-square" style="background-color: red; margin-right: 10px"></span>
                <span>{{'enum.status.faulty' | translate}}</span>
          </span>
          <span *ngIf="item.status == 'fault'">
                <span class="color-square" style="background-color: red; margin-right: 10px"></span>
                <span>{{'enum.status.fault' | translate}}</span>
          </span>
          <span *ngIf="!item.status">--</span>
        </clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'" style="text-align: right">{{item.capacity ? formatCapacity(item.capacity):'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'" style="text-align: right">{{item.freeSpace ? formatCapacity(item.freeSpace):'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" style="min-width: 11rem;" [hidden]="radioCheck!=='list'">
          <div class="progress-block" *ngIf="item.capacity && item.freeSpace">
            <clr-progress-bar clrValue="{{((item.capacity - item.freeSpace)/item.capacity * 100).toFixed(2)}}" clrSuccess></clr-progress-bar>
            <span>{{((item.capacity - item.freeSpace)/item.capacity * 100).toFixed(2)}}%</span>
          </div>
          <span *ngIf="!item.capacity && !item.freeSpace">--</span>
        </clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'" style="text-align: right">{{item.reserveCapacity ? formatCapacity(item.reserveCapacity):'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'">{{item.device ? item.device:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'">{{item.logicPort ? item.logicPort:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'">{{item.shareIp ? item.shareIp:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'">{{item.sharePath ? item.sharePath:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='list'">{{item.fs ? item.fs:'--'}}</clr-dg-cell>

        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='chart'" style="text-align: right">{{item.ops!=null ? item.ops:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='chart'" style="text-align: right">{{item.bandwidth!=null ? item.bandwidth:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='chart'" style="text-align: right">{{item.readResponseTime!=null ? item.readResponseTime:'--'}}</clr-dg-cell>
        <clr-dg-cell class="over_flow" [hidden]="radioCheck!=='chart'" style="text-align: right">{{item.writeResponseTime!=null ? item.writeResponseTime:'--'}}</clr-dg-cell>
      </clr-dg-row>
      <clr-dg-footer>
        <clr-dg-pagination #pagination [clrDgPageSize]="5" [clrDgTotalItems]="total">
          <clr-dg-page-size [clrPageSizeOptions]="[5,10,50,100]">{{'page.perPage' | translate}}</clr-dg-page-size>
          {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
          {{'page.all' | translate}}
          {{pagination.totalItems}}
        </clr-dg-pagination>
      </clr-dg-footer>
    </clr-datagrid>
  </div>
  <!--添加弹框-->
  <clr-wizard #wizard [clrWizardOpen]="addModelShow" [clrWizardClosable]="false">
    <clr-wizard-title>{{'table.createDmeStorage' | translate}}</clr-wizard-title>
    <p *ngIf="errorMsg" style="color: red">{{'errorMsg.addError' | translate}}</p>
    <div *ngIf="modalLoading" class="loadingDiv">
      <span>
        {{'vmfs.loadingTips' | translate}}<img src="./assets/images/loading.gif"  width="20px" height="20px" style="margin-left: 20px;">
      </span>
    </div>
    <div *ngIf="modalHandleLoading" class="loadingDiv">
      <span>
        {{'vmfs.dataHandleLoadingTips' | translate}}<img src="./assets/images/loading.gif"  width="20px" height="20px" style="margin-left: 20px;">
      </span>
    </div>
    <clr-wizard-page #addPageOne [clrWizardPageNextDisabled]="!formPageOne.valid">
      <ng-template clrPageTitle>{{'nfs.datastoreSetting' | translate}}</ng-template> <!-- mandatory -->
      <form clrForm [formGroup]="addFormGroup" #formPageOne="ngForm">
        <!--存储设备-->
        <clr-select-container class="selectClass">
          <label>{{'nfs.storeageDevice' | translate}}</label>
          <select class="inputWidth100Percent" clrSelect (ngModelOptions)="storageList" [(ngModel)]="addForm.storagId"
                  name="storagId" class="clr-select" (change)="selectStoragePool();qosV6Check('add')" formControlName="storagId" required>
            <option *ngFor="let item of storageList" value="{{item.id}}">{{item.name+'('+item.ip+')'}}</option>
          </select>
          <clr-control-error>{{'errorMsg.require' | translate}}</clr-control-error>
        </clr-select-container>
        <clr-select-container class="selectClass">
          <label>{{'nfs.storagePool' | translate}}</label>
          <select class="inputWidth100Percent" clrSelect (ngModelOptions)="storagePools" [(ngModel)]="addForm.storagePoolId"
                  name="storagePoolId" class="clr-select" formControlName="storagePoolId" required>
            <option *ngFor="let item of storagePools" value="{{item.id}}">{{item.name}}</option>
          </select>
          <clr-control-error>{{'errorMsg.require' | translate}}</clr-control-error>
        </clr-select-container>
        <!--        <clr-combobox-container>-->
        <!--          <label>{{'nfs.storagePool' | translate}}</label>-->
        <!--          <clr-combobox  [(ngModel)]="checkedPool" name="checkedPool" required>-->
        <!--            <clr-options>-->
        <!--              <clr-option *clrOptionItems="let device of storagePools; field:'name'" [clrValue]="device">-->
        <!--                {{device.name}}-->
        <!--              </clr-option>-->
        <!--            </clr-options>-->
        <!--          </clr-combobox>-->
        <!--        </clr-combobox-container>-->
        <!--逻辑端口-->
        <clr-select-container class="selectClass">
          <label>{{'nfs.logicPort' | translate}}</label>
          <select clrSelect (ngModelOptions)="logicPorts" [(ngModel)]="addForm.currentPortId" name="currentPortId" formControlName="currentPortId" class="clr-select" required>
            <option *ngFor="let item of logicPorts" value="{{item.id}}">{{item.name+'_'+item.currentPortName+'('+item.mgmtIp+')'}}</option>
          </select>
          <clr-control-error>{{'errorMsg.require' | translate}}</clr-control-error>
        </clr-select-container>
        <!--名称-->
        <clr-input-container>
          <label>{{'nfs.datastoreName' | translate}}</label>
          <input clrInput class="inputWidth100Percent" [(ngModel)]="addForm.nfsName" maxlength="256" name="nfsName" (blur)="checkNfsName();" formControlName="nfsName" required/>
          <clr-control-error>
            <p *ngIf="!oldNfsName" style="color: red">{{'errorMsg.require' | translate}}</p>
            <p *ngIf="matchErr" style="color: red">{{'validations.nameRequiredTwo' | translate}}</p>
            <p *ngIf="nfsNameRepeatErr" style="color: red">{{'errorMsg.fsrepeat' | translate}}</p>
            <p *ngIf="fsNameRepeatErr" style="color: red">{{'errorMsg.fsrepeat' | translate}}</p>
            <p *ngIf="shareNameRepeatErr" style="color: red">{{'errorMsg.sharerepeat' | translate}}</p>
          </clr-control-error>
        </clr-input-container>
        <clr-checkbox-container>
          <label></label>
          <clr-checkbox-wrapper>
            <input type="checkbox" clrCheckbox *ngIf="isCheckSameName();"  [(ngModel)]="addForm.sameName" (change)="setSameName();" name="sameName" formControlName="sameName" />
            <input type="checkbox" clrCheckbox *ngIf="!isCheckSameName();"  [(ngModel)]="addForm.sameName" name="sameName" formControlName="sameName" disabled/>
            <label style="width: 280px;">{{'nfs.sameName' | translate}}</label>
          </clr-checkbox-wrapper>
        </clr-checkbox-container>
        <clr-input-container *ngIf="!addForm.sameName">
          <label>{{'nfs.fsName' | translate}}</label>
          <input class="inputWidth100Percent" maxlength="256" clrInput [(ngModel)]="addForm.fsName" name="fsName" formControlName="fsName" (blur)="checkFsName();" />
          <clr-control-helper *ngIf="matchErr">
            <p style="color: red">{{'validations.nameRequiredTwo' | translate}}</p>
          </clr-control-helper>
          <clr-control-error>
            <p *ngIf="!oldFsName" style="color: red">{{'errorMsg.require' | translate}}</p>
            <p *ngIf="matchErr" style="color: red">{{'errorMsg.numberAndLetter' | translate}}</p>
            <p *ngIf="fsNameRepeatErr" style="color: red">{{'errorMsg.fsrepeat' | translate}}</p>
          </clr-control-error>
        </clr-input-container>
        <clr-input-container *ngIf="!addForm.sameName">
          <label>{{'nfs.shareName' | translate}}</label>
          <input class="inputWidth100Percent" maxlength="256" clrInput [(ngModel)]="addForm.shareName" name="shareName" formControlName="shareName" (blur)="checkShareName();"/>
          <clr-control-helper *ngIf="shareNameContainsCN">
            <p style="color: red">{{'validations.shareNameRequired' | translate}}</p>
          </clr-control-helper>
          <clr-control-error>
            <p *ngIf="!oldShareName" style="color: red">{{'errorMsg.require' | translate}}</p>
            <p *ngIf="matchErr" style="color: red">{{'errorMsg.numberAndLetter' | translate}}</p>
            <p *ngIf="shareNameRepeatErr" style="color: red">{{'errorMsg.sharerepeat' | translate}}</p>
          </clr-control-error>
        </clr-input-container>
        <!--大小-->
        <clr-input-container>
          <label>{{'nfs.size' | translate}}</label>
          <input style="width: 80%" clrInput  class="inputOneLine" type="number" min="0" [(ngModel)]="addForm.size" name="size" formControlName="size" required />
          <select clrInput  [(ngModel)]="unit" name="unit" formControlName="unit" >
            <option value="TB">TB</option>
            <option value="GB">GB</option>
          </select>
        </clr-input-container>
        <!--字符编码-->
        <clr-select-container class="selectClass">
          <label>{{'nfs.characterEncoding' | translate}}</label>
          <select clrSelect [(ngModel)]="addForm.characterEncoding" formControlName="characterEncoding" name="characterEncoding" required>
            <option value="utf-8">UTF-8</option>
            <option value="zh">ZH</option>
            <option value="gbk">GBK</option>
            <option value="euc-tw">EUC-TW</option>
            <option value="big5">BIG5</option>
            <option value="euc-jp">EUC-JP</option>
            <option value="jis">JIS</option>
            <option value="s-jis">S-JIS</option>
            <option value="de">DE</option>
            <option value="pt">PT</option>
            <option value="es">ES</option>
            <option value="fr">FR</option>
            <option value="it">IT</option>
            <option value="ko">KO</option>
          </select>
        </clr-select-container>
        <clr-select-container class="selectClass">
          <label>{{'nfs.nfsProtocol' | translate}}</label>
          <select clrSelect [(ngModel)]="addForm.type" (change)="setType();" formControlName="type" name="type">
            <option value="NFS">v3</option>
            <option value="NFS41">v4.1</option>
          </select>
        </clr-select-container>
        <clr-radio-container *ngIf="addForm.type=='NFS41'">
          <label>{{'nfs.securityType' | translate}}</label>
          <clr-radio-wrapper>
            <input type="radio" clrRadio name="securityType" formControlName="securityType" [(ngModel)]="addForm.securityType" value="AUTH_SYS"/>
            <label>{{'nfs.authSys' | translate}}</label>
          </clr-radio-wrapper>
          <clr-radio-wrapper>
            <input type="radio" clrRadio name="securityType" formControlName="securityType" [(ngModel)]="addForm.securityType" value="SEC_KRB5"/>
            <label>{{'nfs.secKrb5' | translate}}</label>
          </clr-radio-wrapper>
          <clr-radio-wrapper>
            <input type="radio" clrRadio name="securityType" formControlName="securityType" [(ngModel)]="addForm.securityType" value="SEC_KRB5I"/>
            <label>{{'nfs.secKrb5i' | translate}}</label>
          </clr-radio-wrapper>
          <clr-control-helper><clr-icon shape="info-circle" class="is-warning" size="25"></clr-icon>{{'errorMsg.nfsSecurityTips' | translate}}</clr-control-helper>
        </clr-radio-container>
        <!--主机-->
        <clr-select-container class="selectClass">
          <label>{{'nfs.mountHost' | translate}}</label>
          <select clrSelect (ngModelOptions)="hostList" [(ngModel)]="addForm.hostObjectId" required name="hostObjectId" formControlName="hostObjectId" class="clr-select" (change)="checkHost()">
            <option *ngFor="let item of hostList" value="{{item.objectId}}">{{item.hostName}}</option>
          </select>
        </clr-select-container>
        <!--虚拟网卡IP-->
        <clr-select-container class="selectClass">
          <label>{{'nfs.vkernel' | translate}}</label>
          <select clrSelect (ngModelOptions)="vmkernelList" required formControlName="vkernelIp" [(ngModel)]="addForm.vkernelIp" name="vkernelIp" class="clr-select">
            <option *ngFor="let item of vmkernelList" value="{{item.ipAddress}}">{{item.ipAddress}}</option>
          </select>
        </clr-select-container>
        <!--挂载类型-->
        <clr-select-container class="selectClass">
          <label>{{'nfs.mountType' | translate}}</label>
          <select clrSelect [(ngModel)]="addForm.accessMode" required name="accessMode" formControlName="accessMode">
            <option value="readOnly">{{'nfs.readOnly' | translate}}</option>
            <option value="readWrite">{{'nfs.readWrite' | translate}}</option>
          </select>
        </clr-select-container>
      </form>
      <ng-template clrPageButtons>
        <clr-wizard-button (click)="backToNfsList()" [type]="'custom-cancel'">{{'menu.cancel' | translate}}</clr-wizard-button>
        <clr-wizard-button [type]="'previous'">{{'menu.previous' | translate}}</clr-wizard-button>
        <clr-wizard-button [type]="'next'">{{'nfs.button_next' | translate}}</clr-wizard-button>
      </ng-template>
    </clr-wizard-page>
    <clr-wizard-page #addPageTwo [clrWizardPageNextDisabled]="!formPageTwo.valid">
      <ng-template clrPageTitle>{{'nfs.storageSetting' | translate}}</ng-template> <!-- mandatory -->
      <ng-template clrPageNavTitle>{{'nfs.storageSetting' | translate}}</ng-template> <!-- optional -->
      <form clrForm #formPageTwo="ngForm">
        <clr-toggle-wrapper>
          <label  style="width: 100px;">{{'nfs.add_advance' | translate}}</label>
          <input type="checkbox" clrToggle name="advance" [(ngModel)]="addForm.advance"/>
        </clr-toggle-wrapper>
        <div *ngIf="addForm.advance">
          <!--qos-->
          <clr-toggle-wrapper>
            <label  style="width: 100px;">{{'nfs.qosPolicy' | translate}}</label>
            <input type="checkbox" clrToggle name="qosFlag" (change)="qoSFlagChange(addForm);" [(ngModel)]="addForm.qosFlag"/>
          </clr-toggle-wrapper>
          <div *ngIf="addForm.qosFlag">

            <!-- 控制策略 -->
            <clr-checkbox-container clrInline>
              <label style="color: #9F9F9F;width: 100px;">{{'vmfs.controlPolicy' | translate}}</label>
              <!--上限-->
              <clr-checkbox-wrapper>
                <input type="checkbox" id="control_policyUpper" clrCheckbox (change)="controlPolicyChangeFunc('control_policyUpper', 'control_policyLower', false, addForm, true);" name="control_policyUpper" />
                <label style="width: 100px;">{{'vmfs.upperLimitControl' | translate}}</label>
              </clr-checkbox-wrapper>
              <!--下限-->
              <clr-checkbox-wrapper *ngIf="!hiddenLowerFlag">
                <input type="checkbox" id="control_policyLower" clrCheckbox (change)="controlPolicyChangeFunc('control_policyUpper', 'control_policyLower', false, addForm, false);" name="control_policyLower" />
                <label style="width: 100px;">{{'vmfs.lowerLimitControl' | translate}}</label>
              </clr-checkbox-wrapper>
            </clr-checkbox-container>

            <div *ngIf="addForm.qosFlag">
              <!-- 交通管制对象 带宽 上限-->
              <clr-checkbox-container *ngIf="addForm.control_policyUpper == '1'">
                <label style="color: #9F9F9F;">{{'vmfs.trafficControlObject' | translate}}</label>
                <clr-checkbox-wrapper>
                  <input type="checkbox" [(ngModel)]="addForm.maxBandwidthChoose" (ngModelChange)="resetQosFlag(addForm.maxBandwidthChoose, 'maxbandwidth');qosV6Check('add');" name="maxbandwidthChoose" clrCheckbox/>
                  <label style="width: 200px;" >
                    {{'vmfs.bandwidthLimitUpper' | translate}}
                    <input type="number"  min="0" oninput="if (value.length > 11) {value=value.slice(0,11)}" [(readOnly)]="!addForm.maxBandwidthChoose" class="inputOneLine" name="maxBandwidth"
                           [(ngModel)]="addForm.maxBandwidth" (blur)="qosBlur('add', 'maxbandwidth');" [required]="addForm.maxBandwidthChoose"/>
                    {{'vmfs.unitM' | translate}}
                  </label>
                </clr-checkbox-wrapper>
                <clr-control-helper *ngIf="bandWidthMaxErrTips" style="color: red"><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'errorMsg.iposMaxMinTips' | translate}}</clr-control-helper>
                <clr-control-helper *ngIf="!bandWidthMaxErrTips && addForm.maxBandwidthChoose && !addForm.maxBandwidth">{{'errorMsg.require' | translate}}</clr-control-helper>
              </clr-checkbox-container>
              <!-- 交通管制对象 IOPS 上限-->
              <clr-checkbox-container *ngIf="addForm.control_policyUpper == '1'">
                <label></label>
                <clr-checkbox-wrapper>
                  <input type="checkbox" [(ngModel)]="addForm.maxIopsChoose" (ngModelChange)="resetQosFlag(addForm.maxIopsChoose, 'maxiops');qosV6Check('add');" name="maxiopsChoose" clrCheckbox/>
                  <label  style="width: 200px;">
                    {{'vmfs.IOPSLimitUpper' | translate}}
                    <input type="number" min="0" oninput="if (value.length > 11) {value=value.slice(0,11)}" [(readOnly)]="!addForm.maxIopsChoose" class="inputOneLine" name="maxIops"
                           [(ngModel)]="addForm.maxIops" (blur)="qosBlur('add', 'maxiops');" [required]="addForm.maxIopsChoose"/>
                  </label>
                </clr-checkbox-wrapper>
                <clr-control-helper *ngIf="iopsMaxErrTips" style="color: red"><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'errorMsg.iposMaxMinTips' | translate}}</clr-control-helper>
                <clr-control-helper *ngIf="addForm.maxIopsChoose && !iopsMaxErrTips && !addForm.maxIops">{{'errorMsg.require' | translate}}</clr-control-helper>
              </clr-checkbox-container>

              <div *ngIf="!hiddenLowerFlag">
                <!-- 交通管制对象 带宽 下限-->
                <clr-checkbox-container *ngIf="addForm.control_policyLower == '0'">
                  <label *ngIf="addForm.control_policyLower == '0' && addForm.control_policyUpper != '1'" style="color: #9F9F9F;">{{'vmfs.trafficControlObject' | translate}}</label>
                  <label *ngIf="addForm.control_policyLower == '0' && addForm.control_policyUpper == '1'" style="color: #9F9F9F;"></label>
                  <clr-checkbox-wrapper *ngIf="addForm.control_policyLower == '0'">
                    <input type="checkbox" [(ngModel)]="addForm.minBandwidthChoose" (ngModelChange)="resetQosFlag(addForm.minBandwidthChoose, 'minbandwidth');qosV6Check('add');" name="minbandwidthChoose" clrCheckbox/>
                    <label style="width: 200px;" >
                      {{'vmfs.bandwidthLimitLower' | translate}}
                      <input type="number" min="0" oninput="if (value.length > 11) {value=value.slice(0,11)}" [(readOnly)]="!addForm.minBandwidthChoose" class="inputOneLine"
                             name="minBandwidth" [(ngModel)]="addForm.minBandwidth" (blur)="qosBlur('add', 'minbandwidth');" [required]="addForm.minBandwidthChoose"/>
                      {{'vmfs.unitM' | translate}}
                    </label>
                  </clr-checkbox-wrapper>
                  <clr-control-helper *ngIf="bandWidthMinErrTips" style="color: red"><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'errorMsg.iposMaxMinTips' | translate}}</clr-control-helper>
                  <clr-control-helper *ngIf="!bandWidthMinErrTips && !addForm.minBandwidth && addForm.minBandwidthChoose">{{'errorMsg.require' | translate}}</clr-control-helper>
                </clr-checkbox-container>
                <!-- 交通管制对象 IOPS 下限-->
                <clr-checkbox-container *ngIf="addForm.control_policyLower == '0'">
                  <label></label>
                  <clr-checkbox-wrapper>
                    <input type="checkbox" [(ngModel)]="addForm.minIopsChoose" (ngModelChange)="resetQosFlag(addForm.minIopsChoose, 'miniops');qosV6Check('add');" name="minIopsChoose" clrCheckbox/>
                    <label style="width: 200px;" >
                      {{'vmfs.IOPSLimitLower' | translate}}
                      <input type="number" min="0" oninput="if (value.length > 11) {value=value.slice(0,11)}" [(readOnly)]="!addForm.minIopsChoose" class="inputOneLine" name="minIops"
                             [(ngModel)]="addForm.minIops" (blur)="qosBlur('add', 'miniops');" [required]="addForm.minIopsChoose"/>
                    </label>
                  </clr-checkbox-wrapper>
                  <clr-control-helper *ngIf="iopsMinErrTips" style="color: red"><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'errorMsg.iposMaxMinTips' | translate}}</clr-control-helper>
                  <clr-control-helper *ngIf="addForm.minIopsChoose && !addForm.minIops && !iopsMinErrTips">{{'errorMsg.require' | translate}}</clr-control-helper>
                </clr-checkbox-container>
                <!-- 交通管制对象 latency 时延-->
                <clr-checkbox-container *ngIf="addForm.control_policyLower == '0'">
                  <label></label>
                  <clr-checkbox-wrapper *ngIf="!latencyIsSelect">
                    <input type="checkbox" [(ngModel)]="addForm.latencyChoose" (ngModelChange)="resetQosFlag(addForm.latencyChoose, 'latency')" name="latencyChoose" clrCheckbox/>
                    <label style="width: 200px;" >
                      {{'vmfs.latencyMax' | translate}}
                      <input type="number" min="0" oninput="if (value.length > 11) {value=value.slice(0,11)}" [(readOnly)]="!addForm.latencyChoose" class="inputOneLine" name="latency"
                             [(ngModel)]="addForm.latency" (blur)="qosBlur('add', 'latency');" [required]="addForm.latencyChoose"/>{{'vmfs.latencyUnit' | translate}}
                    </label>
                  </clr-checkbox-wrapper>
                  <clr-checkbox-wrapper *ngIf="latencyIsSelect">
                    <input type="checkbox" [(ngModel)]="addForm.latencyChoose" name="latencyChoose" clrCheckbox/>
                    <label style="width: 200px;">
                      {{'vmfs.latencyMax' | translate}}
                      <select [(disabled)]="!addForm.latencyChoose" [(ngModel)]="addForm.latency" name="latency" style="height: 1.2rem;width: 54%;border: none;border-bottom: 1px solid;border-bottom-color: var(--clr-forms-border-color, #b3b3b3);">
                        <option value="500">500</option>
                        <option value="1500">1500</option>
                      </select>
                      {{'vmfs.latencyUnitUs' | translate}}
                    </label>
                  </clr-checkbox-wrapper>
                  <clr-control-helper *ngIf="latencyErrTips" style="color: red"><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'errorMsg.iposMaxMinTips' | translate}}</clr-control-helper>
                  <clr-control-helper *ngIf="!latencyErrTips && addForm.latencyChoose && !addForm.latency">{{'errorMsg.require' | translate}}</clr-control-helper>
                </clr-checkbox-container>
                <clr-checkbox-container *ngIf="bandwidthLimitErr">
                  <clr-control-helper  style="color: red"><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'tips.bandwidthLimitErr' | translate}}</clr-control-helper>
                </clr-checkbox-container>
                <clr-checkbox-container *ngIf="iopsLimitErr">
                  <clr-control-helper style="color: red"><clr-icon shape="exclamation-circle" class="is-solid"></clr-icon>{{'tips.iopsLimitErr' | translate}}</clr-control-helper>
                </clr-checkbox-container>
              </div>
            </div>
          </div>
          <clr-toggle-wrapper>
            <label style="width: 100px;"> {{'nfs.thin' | translate}}</label>
            <input type="checkbox" name="thin" clrToggle [(ngModel)]="addForm.thin"/>
          </clr-toggle-wrapper>
          <!--重删-->
          <clr-select-container class="selectClass" *ngIf="deduplicationShow && addForm.thin">
            <label  style="width: 100px;">{{'nfs.dataDedu' | translate}}</label>
            <select clrSelect [(ngModel)]="addForm.deduplicationEnabled" name="deduplicationEnabled">
              <option value="">{{'rdm.default' | translate}}</option>
              <option value="false">{{'nfs.disable' | translate}}</option>
              <option value="true">{{'nfs.enable' | translate}}</option>
            </select>
          </clr-select-container>
          <!--压缩-->
          <clr-select-container class="selectClass" *ngIf="compressionShow && addForm.thin">
            <label  style="width: 100px;">{{'nfs.dataCompre' | translate}}</label>
            <select clrSelect [(ngModel)]="addForm.compressionEnabled" name="compressionEnabled">
              <option value="">{{'rdm.default' | translate}}</option>
              <option value="false">{{'nfs.disable' | translate}}</option>
              <option value="true">{{'nfs.enable' | translate}}</option>
            </select>
          </clr-select-container>
          <clr-toggle-wrapper *ngIf="!dorado" >
            <label  style="width: 100px;">{{'nfs.capAuto' | translate}}</label>
            <input type="checkbox" clrToggle [(ngModel)]="addForm.autoSizeEnable" name="autoSizeEnable"/>
          </clr-toggle-wrapper>
        </div>
      </form>
      <ng-template clrPageButtons>
        <clr-wizard-button (click)="backToNfsList()" [type]="'custom-cancel'">{{'menu.cancel' | translate}}</clr-wizard-button>
        <clr-wizard-button [type]="'previous'">{{'menu.previous' | translate}}</clr-wizard-button>
        <clr-wizard-button (click)="addNfs();" [type]="'custom-finish'">{{'menu.ok' | translate}}</clr-wizard-button>
      </ng-template>
    </clr-wizard-page>
  </clr-wizard>

  <!--编辑弹框-->
  <clr-modal [(clrModalOpen)]="modifyShow">
    <h3 class="modal-title">{{'menu.modify' | translate}}</h3>
    <div class="modal-body">
      <form  clrForm #formPageOne="ngForm">
        <!--名称-->
        <clr-input-container>
          <label>{{'nfs.name' | translate}}</label>
          <input clrInput name="nfsName" maxlength="256" [(ngModel)]="updateNfs.nfsName"/>
        </clr-input-container>
        <clr-checkbox-container>
          <label></label>
          <clr-checkbox-wrapper>
            <input type="checkbox" clrCheckbox [(ngModel)]="updateNfs.sameName" name="sameName" />
            <label>{{'nfs.sameName' | translate}}</label>
          </clr-checkbox-wrapper>
        </clr-checkbox-container>
        <clr-input-container *ngIf="!updateNfs.sameName">
          <label>{{'nfs.fsName' | translate}}</label>
          <input clrInput [(ngModel)]="updateNfs.fsName" maxlength="256" name="fsName" />
        </clr-input-container>
        <clr-input-container *ngIf="!updateNfs.sameName">
          <label>{{'nfs.shareName' | translate}}</label>
          <input clrInput [(ngModel)]="updateNfs.shareName" maxlength="256" name="shareName" />
        </clr-input-container>
        <!--qos-->
        <clr-toggle-wrapper>
          <label>{{'nfs.qosPolicy' | translate}}</label>
          <input type="checkbox" clrToggle name="qosFlag" (change)="qoSFlagChange(updateNfs);" [(ngModel)]="updateNfs.qosFlag"/>
        </clr-toggle-wrapper>
        <div *ngIf="updateNfs.qosFlag">
          <clr-radio-container clrInline >
            <label class="floatleft">{{'nfs.controlPolicy' | translate}}</label>
            <clr-radio-wrapper>
              <input type="radio" clrRadio name="controlPolicy" required value="up" [(ngModel)]="updateNfs.contolPolicy" />
              <label>{{'nfs.ulc' | translate}}</label>
            </clr-radio-wrapper>
            <clr-radio-wrapper>
              <input type="radio" clrRadio name="controlPolicy" required value="low" [(ngModel)]="updateNfs.contolPolicy" />
              <label>{{'nfs.llc' | translate}}</label>
            </clr-radio-wrapper>
          </clr-radio-container>
          <div *ngIf="updateNfs.contolPolicy">
            <clr-radio-container *ngIf="updateNfs.contolPolicy==='up'">
              <label>{{'nfs.tfo' | translate}}</label>
              <clr-radio-wrapper>
                <input type="radio" clrRadio required value="1" />
                <label>{{'nfs.qos_bandwidth' | translate}}<=<input class="inputOneLine" type="text" name="maxBandwidth" [(ngModel)]="updateNfs.maxBandwidth"> MB/s</label>
              </clr-radio-wrapper>
              <clr-radio-wrapper>
                <input type="radio" clrRadio name="tfo" required value="2"/>
                <label>{{'nfs.qos_iops' | translate}}<=<input class="inputOneLine" type="text" [(ngModel)]="updateNfs.maxIops" name="maxIops"> MB/s</label>
              </clr-radio-wrapper>
            </clr-radio-container>

            <clr-radio-container *ngIf="updateNfs.contolPolicy==='low'">
              <label>{{'nfs.tfo' | translate}}</label>
              <clr-radio-wrapper>
                <input type="radio" clrRadio name="tfo" required value="1"/>
                <label>{{'nfs.qos_bandwidth' | translate}}>=<input class="inputOneLine" type="text" name="minBandwidth" [(ngModel)]="updateNfs.minBandwidth"> MB/s</label>
              </clr-radio-wrapper>
              <clr-radio-wrapper>
                <input type="radio" clrRadio name="tfo" required/>
                <label>{{'nfs.qos_iops' | translate}}>=<input class="inputOneLine" type="text" [(ngModel)]="updateNfs.minIops" name="minIops"> MB/s</label>
              </clr-radio-wrapper>
              <clr-radio-wrapper>
                <input type="radio" clrRadio name="tfo" required value="3"/>
                <label>{{'nfs.qos_latency' | translate}}<=<input class="inputOneLine" type="text" [(ngModel)]="updateNfs.latency" name="latency"> ms</label>
              </clr-radio-wrapper>
            </clr-radio-container>
          </div>
        </div>
        <!--thin-->
        <clr-toggle-wrapper>
          <label> {{'nfs.thin' | translate}}</label>
          <input type="checkbox" name="thin" clrToggle [(ngModel)]="updateNfs.thin"/>
        </clr-toggle-wrapper>
        <!--重删-->
        <clr-select-container>
          <label>{{'nfs.dataDedu' | translate}}</label>
          <select clrSelect [(ngModel)]="updateNfs.deduplicationEnabled" name="deduplicationEnabled">
            <option value="false">{{'nfs.disable' | translate}}</option>
            <option value="true">{{'nfs.enable' | translate}}</option>
          </select>
        </clr-select-container>
        <!--压缩-->
        <clr-select-container>
          <label>{{'nfs.dataCompre' | translate}}</label>
          <select clrSelect [(ngModel)]="updateNfs.compressionEnabled" name="compressionEnabled">
            <option value="false">{{'nfs.disable' | translate}}</option>
            <option value="true">{{'nfs.enable' | translate}}</option>
          </select>
        </clr-select-container>
        <clr-toggle-wrapper >
          <label>{{'nfs.capAuto' | translate}}</label>
          <input type="checkbox" clrToggle [(ngModel)]="updateNfs.autoSizeEnable" name="autoSizeEnable"/>
        </clr-toggle-wrapper>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline" (click)="modifyShow = false">{{'menu.cancel' | translate}}</button>
      <button type="button" class="btn btn-primary" (click)="modifyCommit()">{{'menu.ok' | translate}}</button>
    </div>
  </clr-modal>

  <!--操作成功提示-->
  <clr-modal [(clrModalOpen)]="addSuccessShow || modifySuccessShow || syncSuccessTips" [clrModalSize]="'sm'" [clrModalClosable]="false">
    <h3 class="modal-title modelTile">{{'vmfs.reclaim.title' | translate}}</h3>
    <div class="modal-body">
      <p *ngIf="addSuccessShow">{{'vmfs.add.success' | translate}}</p>
      <p *ngIf="modifySuccessShow">{{'vmfs.modify.success' | translate}}</p>
      <p *ngIf="syncSuccessTips">{{'tips.syncSuccess' | translate}}</p>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-primary" (click)="syncSuccessTips = false;addSuccessShow = false;modifySuccessShow = false;confirmActResult();">{{'menu.ok' | translate}}</button>
    </div>
  </clr-modal>
</div>
