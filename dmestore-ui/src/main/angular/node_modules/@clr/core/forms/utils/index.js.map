{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/forms/utils/index.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2016-2020 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\n\nimport { html } from 'lit-element';\nimport { isVisible } from '@clr/core/internal';\nimport { ControlLayout, FormLayout } from './interfaces.js';\nimport { CdsInternalControlGroup } from '../control-group/control-group.element.js';\nimport { CdsControl } from '../control/control.element.js';\nimport { CdsControlMessage } from '../control-message/control-message.element.js';\n\nexport const formLayouts: FormLayout[] = ['vertical', 'vertical-inline', 'horizontal', 'horizontal-inline', 'compact'];\n\nexport const defaultFormLayout = 'horizontal';\n\nexport const defaultControlWidth = 'stretch';\n\nexport function associateInputAndLabel(input: HTMLInputElement, label: HTMLLabelElement, id: string) {\n  input.id = id;\n  label.setAttribute('for', input.id);\n}\n\nexport function associateInputToDatalist(input: HTMLInputElement, datalist: HTMLDataListElement) {\n  if (datalist) {\n    datalist.id = `${input.id}-datalist`;\n    input.setAttribute('list', datalist.id);\n  }\n}\n\nexport const layoutGroupToControlMapper: { [key: string]: ControlLayout } = {\n  'horizontal-inline': 'horizontal',\n  'vertical-inline': 'vertical',\n  horizontal: 'horizontal',\n  vertical: 'vertical',\n  compact: 'compact',\n};\n\nexport function getStatusIcon(status: 'error' | 'success' | 'neutral') {\n  return html`${status !== 'neutral'\n    ? html` <cds-control-action readonly class=\"status\" cds-layout=\"align:shrink\">\n        <cds-icon\n          status=\"${status === 'error' ? 'danger' : 'success'}\"\n          shape=\"${status === 'error' ? 'exclamation-circle' : 'check-circle'}\"\n          size=\"16\"\n          .innerOffset=${4}\n        ></cds-icon>\n      </cds-control-action>`\n    : ''} `;\n}\n\nexport async function getLargestPrimaryLabelWidth(controls: (CdsControl | CdsInternalControlGroup)[]) {\n  return Promise.all(controls.map(c => c.updateComplete)).then(() => {\n    const primaryLabels = controls.filter(c => c.controlLabel?.action === 'primary');\n    return Math.max(...primaryLabels.map(c => c.controlLabel.getBoundingClientRect().width));\n  });\n}\n\nexport function controlIsWrapped(input: HTMLElement, label: HTMLElement, layout: FormLayout) {\n  return (\n    layout !== 'vertical' &&\n    layout !== 'vertical-inline' &&\n    input.getBoundingClientRect().top > label.getBoundingClientRect().top + 12 // 12px buffer for rounding and inputs that are thin like the range input\n  );\n}\n\nexport function inlineControlListIsWrapped(inlineControls: CdsControl[], layout: FormLayout) {\n  const first = inlineControls[0];\n  const last = inlineControls[inlineControls.length - 1];\n  const isInlineLayout = layout === 'vertical-inline' || layout === 'horizontal-inline';\n  return isInlineLayout && last.getBoundingClientRect().top > first.getBoundingClientRect().top;\n}\n\nexport function isVerticalLayout(layout: FormLayout) {\n  return layout === 'vertical' || layout === 'vertical-inline';\n}\n\nexport async function getCurrentMessageStatus(messages: CdsControlMessage[]) {\n  const message = messages.find(m => m.status !== 'neutral');\n  await message?.updateComplete;\n  return message && isVisible(message) ? message.status : 'neutral';\n}\n"]}