{"version":3,"sources":["webpack:///src/app/routes/common.service.ts"],"names":["CommonService","query","p","Object","assign","state","console","log","sort","order","reverse","by","filters","filter","property","value","page","current","per_page","size","qq","params"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAIaA,a;;;;;;;mCAEa;AAAA,gBAAjBC,KAAiB,uEAAJ,EAAI;AACtB,gBAAMC,CAAC,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,KAAlB,CAAV;AACA,mBAAOC,CAAP;AACD,W,CAED;;;;kCACQG,K,EAAkCJ,K,EAAY;AACpDK,mBAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,gBAAIG,IAAJ;AACAA,gBAAI,GAAGH,KAAK,CAACG,IAAb,CAHoD,CAIpD;;AACA,gBAAIA,IAAJ,EAAU;AACRP,mBAAK,CAACQ,KAAN,GAAcD,IAAI,CAACE,OAAL,GAAe,MAAf,GAAwB,KAAtC;AACAT,mBAAK,CAACO,IAAN,GAAaA,IAAI,CAACG,EAAlB;AACD,aARmD,CASpD;;;AACA,gBAAIN,KAAK,CAACO,OAAV,EAAmB;AAAA,yDACIP,KAAK,CAACO,OADV;AAAA;;AAAA;AACjB,oEAAoC;AAAA,sBAAzBC,MAAyB;AAAA,sBAC3BC,QAD2B,GACPD,MADO,CAC3BC,QAD2B;AAAA,sBACjBC,KADiB,GACPF,MADO,CACjBE,KADiB;AAElCd,uBAAK,CAACa,QAAD,CAAL,GAAkBC,KAAlB;AACD;AAJgB;AAAA;AAAA;AAAA;AAAA;AAKlB,aAfmD,CAgBpD;;;AACA,gBAAIV,KAAK,CAACW,IAAV,EAAgB;AACdf,mBAAK,CAACe,IAAN,GAAaX,KAAK,CAACW,IAAN,CAAWC,OAAxB;AACAhB,mBAAK,CAACiB,QAAN,GAAiBb,KAAK,CAACW,IAAN,CAAWG,IAA5B;AACD;;AACD,gBAAMC,EAAE,GAAG;AAAEC,oBAAM,EAAG,KAAKA,MAAL,CAAYpB,KAAZ;AAAX,aAAX;AACAK,mBAAO,CAACC,GAAR,CAAYa,EAAZ;AACA,mBAAOA,EAAP;AACD;;;;;;;yBAhCUpB,a;AAAa,O;;;eAAbA,a;AAAa,iBAAbA,aAAa;;;;;wEAAbA,a,EAAa;gBADzB;AACyB,U","file":"common-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {ClrDatagridStateInterface} from '@clr/angular';\r\n\r\n@Injectable()\r\nexport class CommonService {\r\n\r\n  params(query: any = {}) { // 对query进行处理\r\n    const p = Object.assign({}, query);\r\n    return p;\r\n  }\r\n\r\n  // table数据处理\r\n  refresh(state: ClrDatagridStateInterface, query: any) {\r\n    console.log(state);\r\n    let sort;\r\n    sort = state.sort;\r\n    // 排序 排序规则order:  true降序  false升序 ;   排序值by: 字符串  按照某个字段排序  在html里[clrDgSortBy]自定义\r\n    if (sort) {\r\n      query.order = sort.reverse ? 'desc' : 'asc';\r\n      query.sort = sort.by;\r\n    }\r\n    // 过滤器   过滤内容\r\n    if (state.filters) {\r\n      for (const filter of state.filters) {\r\n        const {property, value} =  filter as {property: string, value: string};\r\n        query[property] = value;\r\n      }\r\n    }\r\n    // 分页器数据current: 1 当前页;    size: 5 分页大小\r\n    if (state.page) {\r\n      query.page = state.page.current;\r\n      query.per_page = state.page.size;\r\n    }\r\n    const qq = { params : this.params(query)};\r\n    console.log(qq)\r\n    return qq;\r\n  }\r\n}\r\n"]}