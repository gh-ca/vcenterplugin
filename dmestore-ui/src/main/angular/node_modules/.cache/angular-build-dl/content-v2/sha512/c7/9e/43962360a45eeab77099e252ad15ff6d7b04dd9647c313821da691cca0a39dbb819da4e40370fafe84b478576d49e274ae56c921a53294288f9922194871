!function(){function t(t,c){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}function c(t,c){for(var e=0;e<c.length;e++){var r=c[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{VH0b:function(e,r,o){"use strict";o.r(r),o.d(r,"BestpracticeModule",(function(){return L}));var i=o("PCNd"),n=o("tyNb"),l=o("6rlL"),s=o("fXoL"),a=o("tk/3"),b=o("8MG2"),h=o("sYmb");function d(t,c){if(1&t){var e=s.Vb();s.Ub(0,"clr-dg-row",14),s.Ub(1,"clr-dg-cell"),s.Kc(2),s.Tb(),s.Ub(3,"clr-dg-cell"),s.Kc(4),s.Tb(),s.Ub(5,"clr-dg-cell"),s.Ub(6,"span",15),s.Pb(7,"span",16),s.Kc(8),s.hc(9,"translate"),s.Tb(),s.Ub(10,"span",15),s.Pb(11,"span",17),s.Kc(12),s.hc(13,"translate"),s.Tb(),s.Ub(14,"span",15),s.Pb(15,"span",18),s.Kc(16),s.hc(17,"translate"),s.Tb(),s.Ub(18,"span",15),s.Pb(19,"span",19),s.Kc(20),s.hc(21,"translate"),s.Tb(),s.Tb(),s.Ub(22,"clr-dg-cell"),s.Ub(23,"span",20),s.cc("click",(function(){s.zc(e);var t=c.$implicit;return s.gc().openHostList(t)})),s.Kc(24),s.Tb(),s.Tb(),s.Tb()}if(2&t){var r=c.$implicit;s.mc("clrDgItem",r),s.Cb(2),s.Lc(r.hostSetting),s.Cb(2),s.Lc(r.recommendValue),s.Cb(2),s.mc("hidden","Critical"!=r.level),s.Cb(2),s.Mc("",s.ic(9,12,"bestPractice.critical")," "),s.Cb(2),s.mc("hidden","Major"!=r.level),s.Cb(2),s.Mc("",s.ic(13,14,"bestPractice.major")," "),s.Cb(2),s.mc("hidden","Warning"!=r.level),s.Cb(2),s.Mc("",s.ic(17,16,"bestPractice.warning")," "),s.Cb(2),s.mc("hidden","Info"!=r.level),s.Cb(2),s.Mc("",s.ic(21,18,"bestPractice.info")," "),s.Cb(4),s.Lc(r.count)}}function u(t,c){if(1&t&&(s.Ub(0,"clr-dg-row",14),s.Ub(1,"clr-dg-cell"),s.Kc(2),s.Tb(),s.Ub(3,"clr-dg-cell"),s.Kc(4),s.Tb(),s.Ub(5,"clr-dg-cell"),s.Kc(6),s.Tb(),s.Tb()),2&t){var e=c.$implicit;s.mc("clrDgItem",e),s.Cb(2),s.Lc(e.hostName),s.Cb(2),s.Lc(e.actualValue),s.Cb(2),s.Lc(e.recommendValue)}}var g,p,m,f=function(){return[5,10,50,100]},C=[{path:"",component:(g=function(){function e(c,r,o){t(this,e),this.cdr=c,this.http=r,this.commonService=o,this.rowSelected=[],this.isLoading=!0,this.list=[],this.total=0,this.query={},this.hostModalShow=!1,this.hostSelected=[],this.hostIsLoading=!1,this.hostList=[],this.hostTotal=0}var r,o,i;return r=e,(o=[{key:"ngOnInit",value:function(){}},{key:"applySelectedPractice",value:function(){var t=this,c=[],e="";this.rowSelected.forEach((function(t){var r={hostSetting:"",hostObjectIds:[]};r.hostSetting=t.hostSetting,t.hostList.forEach((function(t){r.hostObjectIds.push(t.hostObjectId),"true"==t.needReboot&&(e+=t.hostName+",")})),c.push(r)})),0!=e.length&&alert("modify config, you need reboot "+e),console.log(c),this.http.post("v1/bestpractice/update/bylist",c).subscribe((function(c){"200"==c.code&&t.practiceRefresh()}),(function(t){console.error("ERROR",t)}))}},{key:"applyByHosts",value:function(){var t=this,c=[],e={hostSetting:"",hostObjectIds:[]};e.hostSetting=this.currentBestpractice.hostSetting;var r="";this.hostSelected.forEach((function(t){e.hostObjectIds.push(t.hostObjectId),"true"==t.needReboot&&(r+=t.hostName+",")})),c.push(e),0!=r.length&&alert("modify config, you need reboot "+r),console.log(c),this.http.post("v1/bestpractice/update/bylist",c).subscribe((function(c){"200"==c.code&&t.practiceRefresh()}),(function(t){console.error("ERROR",t)}))}},{key:"recheck",value:function(){this.http.post("v1/bestpractice/check",{}).subscribe((function(t){}),(function(t){console.error("ERROR",t)}))}},{key:"practiceRefresh",value:function(){var t=this;this.isLoading=!0,this.http.get("v1/bestpractice/records/all",{}).subscribe((function(c){"200"===c.code&&(t.list=c.data,t.total=c.data.length,t.isLoading=!1,t.cdr.detectChanges())}),(function(t){console.error("ERROR",t)}))}},{key:"openHostList",value:function(t){this.hostModalShow=!0,this.currentBestpractice=t,this.hostRefresh()}},{key:"hostRefresh",value:function(){!0===this.hostModalShow&&(this.hostIsLoading=!0,this.hostList=this.currentBestpractice.hostList,this.hostTotal=this.currentBestpractice.hostList.length,this.hostIsLoading=!1,this.cdr.detectChanges())}}])&&c(r.prototype,o),i&&c(r,i),e}(),g.\u0275fac=function(t){return new(t||g)(s.Ob(s.h),s.Ob(a.b),s.Ob(l.a))},g.\u0275cmp=s.Ib({type:g,selectors:[["app-bestpractice"]],features:[s.Bb([l.a])],decls:51,vars:60,consts:[[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"click"],[3,"clrDgSelected","clrDgLoading","clrDgSelectedChange","clrDgRefresh"],[3,"clrDgField"],[3,"clrDgField","clrDgSortOrder"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],[2,"width","576px","height","300px",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],[3,"clrDgItem"],[3,"hidden"],[1,"color-square",2,"background-color","#CA2200","margin-right","10px"],[1,"color-square",2,"background-color","#F0C004","margin-right","10px"],[1,"color-square",2,"background-color","#FEE273","margin-right","10px"],[1,"color-square",2,"background-color","#79C6E6","margin-right","10px"],[2,"color","#00F","cursor","pointer",3,"click"]],template:function(t,c){if(1&t&&(s.Ub(0,"div"),s.Ub(1,"div"),s.Ub(2,"button",0),s.cc("click",(function(){return c.applySelectedPractice()})),s.Kc(3),s.hc(4,"translate"),s.Tb(),s.Ub(5,"button",1),s.cc("click",(function(){return c.recheck()})),s.Kc(6),s.hc(7,"translate"),s.Tb(),s.Tb(),s.Ub(8,"clr-datagrid",2),s.cc("clrDgSelectedChange",(function(t){return c.rowSelected=t}))("clrDgRefresh",(function(){return c.practiceRefresh()})),s.Ub(9,"clr-dg-column",3),s.Kc(10),s.hc(11,"translate"),s.Tb(),s.Ub(12,"clr-dg-column",3),s.Kc(13),s.hc(14,"translate"),s.Tb(),s.Ub(15,"clr-dg-column",3),s.Kc(16),s.hc(17,"translate"),s.Tb(),s.Ub(18,"clr-dg-column",4),s.Kc(19),s.hc(20,"translate"),s.Tb(),s.Ic(21,d,25,20,"clr-dg-row",5),s.Ub(22,"clr-dg-footer"),s.Ub(23,"clr-dg-pagination",6,7),s.Pb(25,"clr-dg-page-size",8),s.Kc(26),s.Tb(),s.Tb(),s.Tb(),s.Ub(27,"clr-modal",9),s.cc("clrModalOpenChange",(function(t){return c.hostModalShow=t})),s.Ub(28,"h3",10),s.Kc(29),s.hc(30,"translate"),s.Tb(),s.Ub(31,"div",11),s.Ub(32,"div"),s.Ub(33,"button",0),s.cc("click",(function(){return c.applyByHosts()})),s.Kc(34),s.hc(35,"translate"),s.Tb(),s.Tb(),s.Ub(36,"clr-datagrid",2),s.cc("clrDgSelectedChange",(function(t){return c.hostSelected=t}))("clrDgRefresh",(function(){return c.hostRefresh()})),s.Ub(37,"clr-dg-column",3),s.Kc(38),s.hc(39,"translate"),s.Tb(),s.Ub(40,"clr-dg-column",3),s.Kc(41),s.hc(42,"translate"),s.Tb(),s.Ub(43,"clr-dg-column",3),s.Kc(44),s.hc(45,"translate"),s.Tb(),s.Ic(46,u,7,4,"clr-dg-row",5),s.Tb(),s.Tb(),s.Ub(47,"div",12),s.Ub(48,"button",13),s.cc("click",(function(){return c.hostModalShow=!1})),s.Kc(49),s.hc(50,"translate"),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&t){var e=s.wc(24);s.Cb(2),s.mc("disabled",0===c.rowSelected.length),s.Cb(1),s.Lc(s.ic(4,35,"bestPractice.apply")),s.Cb(3),s.Lc(s.ic(7,37,"bestPractice.check")),s.Cb(2),s.mc("clrDgSelected",c.rowSelected)("clrDgLoading",c.isLoading),s.Cb(1),s.mc("clrDgField","hostSetting"),s.Cb(1),s.Lc(s.ic(11,39,"bestPractice.hostSetting")),s.Cb(2),s.mc("clrDgField","recommendValue"),s.Cb(1),s.Lc(s.ic(14,41,"bestPractice.recommend")),s.Cb(2),s.mc("clrDgField","level"),s.Cb(1),s.Lc(s.ic(17,43,"bestPractice.level")),s.Cb(2),s.mc("clrDgField","violation")("clrDgSortOrder","violation"),s.Cb(1),s.Lc(s.ic(20,45,"bestPractice.violation")),s.Cb(2),s.mc("clrDgItemsOf",c.list),s.Cb(2),s.mc("clrDgPageSize",5)("clrDgTotalItems",c.total),s.Cb(2),s.mc("clrPageSizeOptions",s.pc(59,f)),s.Cb(1),s.Oc(" ",e.firstItem+1," - ",e.lastItem+1," of ",e.totalItems," "),s.Cb(1),s.mc("clrModalOpen",c.hostModalShow),s.Cb(2),s.Lc(s.ic(30,47,"bestPractice.non-compliant")),s.Cb(4),s.mc("disabled",0===c.hostSelected.length),s.Cb(1),s.Lc(s.ic(35,49,"bestPractice.apply")),s.Cb(2),s.mc("clrDgSelected",c.hostSelected)("clrDgLoading",c.hostIsLoading),s.Cb(1),s.mc("clrDgField","hostName"),s.Cb(1),s.Lc(s.ic(39,51,"bestPractice.host")),s.Cb(2),s.mc("clrDgField","actualValue"),s.Cb(1),s.Lc(s.ic(42,53,"bestPractice.actual")),s.Cb(2),s.mc("clrDgField","recommendValue"),s.Cb(1),s.Lc(s.ic(45,55,"bestPractice.recommend")),s.Cb(2),s.mc("clrDgItemsOf",c.hostList),s.Cb(3),s.Lc(s.ic(50,57,"menu.close"))}},directives:[b.m,b.qb,b.sb,b.lb,b.tb,b.o,b.pb,b.r,b.q,b.u,b.t,b.J,b.K,b.v,b.rb,b.n,b.nb],pipes:[h.c],styles:[".color-square[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-bottom;height:.7rem;width:.7rem;border:.05rem solid #000;border-radius:2rem}"],changeDetection:0}),g)}],v=((m=function c(){t(this,c)}).\u0275mod=s.Mb({type:m}),m.\u0275inj=s.Lb({factory:function(t){return new(t||m)},imports:[[n.i.forChild(C)],n.i]}),m),L=((p=function c(){t(this,c)}).\u0275mod=s.Mb({type:p}),p.\u0275inj=s.Lb({factory:function(t){return new(t||p)},imports:[[i.a,v]]}),p)}}])}();