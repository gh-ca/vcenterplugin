!function(){function c(c,t){if(!(c instanceof t))throw new TypeError("Cannot call a class as a function")}function t(c,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{VH0b:function(e,i,r){"use strict";r.r(i),r.d(i,"BestpracticeModule",(function(){return v}));var l=r("PCNd"),a=r("tyNb"),n=r("6rlL"),o=r("/Kh9"),s=r("fXoL"),b=r("tk/3"),h=r("8MG2"),d=r("sYmb");function p(c,t){if(1&c){var e=s.Vb();s.Ub(0,"clr-dg-row",20),s.Ub(1,"clr-dg-cell"),s.Kc(2),s.Tb(),s.Ub(3,"clr-dg-cell"),s.Kc(4),s.Tb(),s.Ub(5,"clr-dg-cell"),s.Ub(6,"span",21),s.Pb(7,"span",22),s.Kc(8),s.hc(9,"translate"),s.Tb(),s.Ub(10,"span",21),s.Pb(11,"span",23),s.Kc(12),s.hc(13,"translate"),s.Tb(),s.Ub(14,"span",21),s.Pb(15,"span",24),s.Kc(16),s.hc(17,"translate"),s.Tb(),s.Ub(18,"span",21),s.Pb(19,"span",25),s.Kc(20),s.hc(21,"translate"),s.Tb(),s.Tb(),s.Ub(22,"clr-dg-cell"),s.Ub(23,"span",26),s.cc("click",(function(){s.zc(e);var c=t.$implicit;return s.gc().openHostList(c)})),s.Kc(24),s.Tb(),s.Tb(),s.Tb()}if(2&c){var i=t.$implicit;s.mc("clrDgItem",i),s.Cb(2),s.Lc(i.hostSetting),s.Cb(2),s.Lc(i.recommendValue),s.Cb(2),s.mc("hidden","Critical"!=i.level),s.Cb(2),s.Mc("",s.ic(9,12,"bestPractice.critical")," "),s.Cb(2),s.mc("hidden","Major"!=i.level),s.Cb(2),s.Mc("",s.ic(13,14,"bestPractice.major")," "),s.Cb(2),s.mc("hidden","Warning"!=i.level),s.Cb(2),s.Mc("",s.ic(17,16,"bestPractice.warning")," "),s.Cb(2),s.mc("hidden","Info"!=i.level),s.Cb(2),s.Mc("",s.ic(21,18,"bestPractice.info")," "),s.Cb(4),s.Lc(i.count)}}function u(c,t){if(1&c&&(s.Ub(0,"clr-dg-row",20),s.Ub(1,"clr-dg-cell"),s.Kc(2),s.Tb(),s.Ub(3,"clr-dg-cell"),s.Kc(4),s.Tb(),s.Ub(5,"clr-dg-cell"),s.Kc(6),s.Tb(),s.Tb()),2&c){var e=t.$implicit;s.mc("clrDgItem",e),s.Cb(2),s.Lc(e.hostName),s.Cb(2),s.Lc(e.actualValue),s.Cb(2),s.Lc(e.recommendValue)}}var g,m,f,C=function(){return[5,10,50,100]},T=[{path:"",component:(g=function(){function e(t,i,r,l){c(this,e),this.cdr=t,this.gs=i,this.http=r,this.commonService=l,this.rowSelected=[],this.isLoading=!0,this.list=[],this.total=0,this.query={},this.hostModalShow=!1,this.hostSelected=[],this.hostIsLoading=!1,this.hostList=[],this.hostTotal=0,this.tipModal=!1,this.ips="",this.applyType="1",this.tipModalSuccess=!1,this.tipModalFail=!1}var i,r,l;return i=e,(r=[{key:"ngOnInit",value:function(){}},{key:"packApplyPracticeParams",value:function(){var c=this,t=[];return this.ips="",this.rowSelected.forEach((function(e){var i={hostSetting:"",hostObjectIds:[]};i.hostSetting=e.hostSetting,e.hostList.forEach((function(t){i.hostObjectIds.push(t.hostObjectId),"true"==t.needReboot&&(c.ips+=t.hostName+",")})),t.push(i)})),t}},{key:"packApplyPracticeParamsByHost",value:function(){var c=[],t={hostSetting:"",hostObjectIds:[]};return t.hostSetting=this.currentBestpractice.hostSetting,this.hostSelected.forEach((function(c){t.hostObjectIds.push(c.hostObjectId),"true"==c.needReboot&&c.hostName})),c.push(t),c}},{key:"applyPractice",value:function(c){var t=this;this.gs.loading=!0,this.http.post("v1/bestpractice/update/bylist",c).subscribe((function(c){t.gs.loading=!1,"200"==c.code?(t.tipModalSuccess=!0,"1"!=t.applyType&&(t.hostModalShow=!1),t.practiceRefresh()):t.tipModalFail=!0,t.cdr.detectChanges()}),(function(c){console.error("ERROR",c)}))}},{key:"openTip",value:function(){this.tipModal=!0}},{key:"closeTip",value:function(){this.tipModal=!1}},{key:"applyClick",value:function(c){var t;this.applyType=c,t="1"==this.applyType?this.packApplyPracticeParams():this.packApplyPracticeParamsByHost(),0!=this.ips.length?this.openTip():this.applyPractice(t)}},{key:"tipOk",value:function(){var c;this.closeTip(),c="1"==this.applyType?this.packApplyPracticeParams():this.packApplyPracticeParamsByHost(),this.applyPractice(c)}},{key:"recheck",value:function(){var c=this;this.gs.loading=!0,this.http.post("v1/bestpractice/check",{}).subscribe((function(t){c.gs.loading=!1,"200"==t.code?(c.tipModalSuccess=!0,c.practiceRefresh()):c.tipModalFail=!0,c.cdr.detectChanges()}),(function(c){console.error("ERROR",c)}))}},{key:"practiceRefresh",value:function(){var c=this;this.isLoading=!0,this.http.get("v1/bestpractice/records/all",{}).subscribe((function(t){"200"===t.code&&(c.list=t.data,c.total=t.data.length,c.isLoading=!1,c.cdr.detectChanges())}),(function(c){console.error("ERROR",c)}))}},{key:"openHostList",value:function(c){this.hostModalShow=!0,this.currentBestpractice=c,this.hostRefresh()}},{key:"hostRefresh",value:function(){!0===this.hostModalShow&&(this.hostIsLoading=!0,this.hostList=this.currentBestpractice.hostList,this.hostTotal=this.currentBestpractice.hostList.length,this.hostIsLoading=!1,this.cdr.detectChanges())}}])&&t(i.prototype,r),l&&t(i,l),e}(),g.\u0275fac=function(c){return new(c||g)(s.Ob(s.h),s.Ob(o.b),s.Ob(b.b),s.Ob(n.a))},g.\u0275cmp=s.Ib({type:g,selectors:[["app-bestpractice"]],features:[s.Bb([n.a])],decls:87,vars:94,consts:[[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"click"],[3,"clrDgSelected","clrDgLoading","clrDgSelectedChange","clrDgRefresh"],[3,"clrDgField"],[3,"clrDgField","clrDgSortOrder"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],[2,"width","576px","height","300px",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],[3,"clrModalOpen","clrModalSize","clrModalOpenChange"],["type","button",1,"btn","btn-outline-warning",3,"click"],["shape","success-standard",1,"is-solid",2,"color","#59A220","margin-right","5px"],["type","button",1,"btn","btn-success",3,"click"],["shape","error-standard",1,"is-solid",2,"color","red","margin-right","5px"],["type","button",1,"btn","btn-danger",3,"click"],[3,"clrDgItem"],[3,"hidden"],[1,"color-square",2,"background-color","#CA2200","margin-right","10px"],[1,"color-square",2,"background-color","#F0C004","margin-right","10px"],[1,"color-square",2,"background-color","#FEE273","margin-right","10px"],[1,"color-square",2,"background-color","#79C6E6","margin-right","10px"],[2,"color","#00F","cursor","pointer",3,"click"]],template:function(c,t){if(1&c&&(s.Ub(0,"div"),s.Ub(1,"div"),s.Ub(2,"button",0),s.cc("click",(function(){return t.applyClick("1")})),s.Kc(3),s.hc(4,"translate"),s.Tb(),s.Ub(5,"button",1),s.cc("click",(function(){return t.recheck()})),s.Kc(6),s.hc(7,"translate"),s.Tb(),s.Tb(),s.Ub(8,"clr-datagrid",2),s.cc("clrDgSelectedChange",(function(c){return t.rowSelected=c}))("clrDgRefresh",(function(){return t.practiceRefresh()})),s.Ub(9,"clr-dg-column",3),s.Kc(10),s.hc(11,"translate"),s.Tb(),s.Ub(12,"clr-dg-column",3),s.Kc(13),s.hc(14,"translate"),s.Tb(),s.Ub(15,"clr-dg-column",3),s.Kc(16),s.hc(17,"translate"),s.Tb(),s.Ub(18,"clr-dg-column",4),s.Kc(19),s.hc(20,"translate"),s.Tb(),s.Ic(21,p,25,20,"clr-dg-row",5),s.Ub(22,"clr-dg-footer"),s.Ub(23,"clr-dg-pagination",6,7),s.Pb(25,"clr-dg-page-size",8),s.Kc(26),s.Tb(),s.Tb(),s.Tb(),s.Ub(27,"clr-modal",9),s.cc("clrModalOpenChange",(function(c){return t.hostModalShow=c})),s.Ub(28,"h3",10),s.Kc(29),s.hc(30,"translate"),s.Tb(),s.Ub(31,"div",11),s.Ub(32,"div"),s.Ub(33,"button",0),s.cc("click",(function(){return t.applyClick("2")})),s.Kc(34),s.hc(35,"translate"),s.Tb(),s.Tb(),s.Ub(36,"clr-datagrid",2),s.cc("clrDgSelectedChange",(function(c){return t.hostSelected=c}))("clrDgRefresh",(function(){return t.hostRefresh()})),s.Ub(37,"clr-dg-column",3),s.Kc(38),s.hc(39,"translate"),s.Tb(),s.Ub(40,"clr-dg-column",3),s.Kc(41),s.hc(42,"translate"),s.Tb(),s.Ub(43,"clr-dg-column",3),s.Kc(44),s.hc(45,"translate"),s.Tb(),s.Ic(46,u,7,4,"clr-dg-row",5),s.Tb(),s.Tb(),s.Ub(47,"div",12),s.Ub(48,"button",13),s.cc("click",(function(){return t.hostModalShow=!1})),s.Kc(49),s.hc(50,"translate"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(51,"clr-modal",14),s.cc("clrModalOpenChange",(function(c){return t.tipModal=c})),s.Ub(52,"h3",10),s.Kc(53),s.hc(54,"translate"),s.Tb(),s.Ub(55,"div",11),s.Ub(56,"p"),s.Kc(57),s.hc(58,"translate"),s.Tb(),s.Tb(),s.Ub(59,"div",12),s.Ub(60,"button",15),s.cc("click",(function(){return t.tipOk()})),s.Kc(61),s.hc(62,"translate"),s.Tb(),s.Tb(),s.Tb(),s.Ub(63,"clr-modal",14),s.cc("clrModalOpenChange",(function(c){return t.tipModalSuccess=c})),s.Ub(64,"h3",10),s.Kc(65),s.hc(66,"translate"),s.Tb(),s.Ub(67,"div",11),s.Pb(68,"clr-icon",16),s.Kc(69),s.hc(70,"translate"),s.Tb(),s.Ub(71,"div",12),s.Ub(72,"button",17),s.cc("click",(function(){return t.tipModalSuccess=!1})),s.Kc(73),s.hc(74,"translate"),s.Tb(),s.Tb(),s.Tb(),s.Ub(75,"clr-modal",14),s.cc("clrModalOpenChange",(function(c){return t.tipModalFail=c})),s.Ub(76,"h3",10),s.Kc(77),s.hc(78,"translate"),s.Tb(),s.Ub(79,"div",11),s.Pb(80,"clr-icon",18),s.Kc(81),s.hc(82,"translate"),s.Tb(),s.Ub(83,"div",12),s.Ub(84,"button",19),s.cc("click",(function(){return t.tipModalFail=!1})),s.Kc(85),s.hc(86,"translate"),s.Tb(),s.Tb(),s.Tb()),2&c){var e=s.wc(24);s.Cb(2),s.mc("disabled",0===t.rowSelected.length),s.Cb(1),s.Lc(s.ic(4,51,"bestPractice.apply")),s.Cb(3),s.Lc(s.ic(7,53,"bestPractice.check")),s.Cb(2),s.mc("clrDgSelected",t.rowSelected)("clrDgLoading",t.isLoading),s.Cb(1),s.mc("clrDgField","hostSetting"),s.Cb(1),s.Lc(s.ic(11,55,"bestPractice.hostSetting")),s.Cb(2),s.mc("clrDgField","recommendValue"),s.Cb(1),s.Lc(s.ic(14,57,"bestPractice.recommend")),s.Cb(2),s.mc("clrDgField","level"),s.Cb(1),s.Lc(s.ic(17,59,"bestPractice.level")),s.Cb(2),s.mc("clrDgField","violation")("clrDgSortOrder","violation"),s.Cb(1),s.Lc(s.ic(20,61,"bestPractice.violation")),s.Cb(2),s.mc("clrDgItemsOf",t.list),s.Cb(2),s.mc("clrDgPageSize",5)("clrDgTotalItems",t.total),s.Cb(2),s.mc("clrPageSizeOptions",s.pc(93,C)),s.Cb(1),s.Oc(" ",e.firstItem+1," - ",e.lastItem+1," of ",e.totalItems," "),s.Cb(1),s.mc("clrModalOpen",t.hostModalShow),s.Cb(2),s.Lc(s.ic(30,63,"bestPractice.non-compliant")),s.Cb(4),s.mc("disabled",0===t.hostSelected.length),s.Cb(1),s.Lc(s.ic(35,65,"bestPractice.apply")),s.Cb(2),s.mc("clrDgSelected",t.hostSelected)("clrDgLoading",t.hostIsLoading),s.Cb(1),s.mc("clrDgField","hostName"),s.Cb(1),s.Lc(s.ic(39,67,"bestPractice.host")),s.Cb(2),s.mc("clrDgField","actualValue"),s.Cb(1),s.Lc(s.ic(42,69,"bestPractice.actual")),s.Cb(2),s.mc("clrDgField","recommendValue"),s.Cb(1),s.Lc(s.ic(45,71,"bestPractice.recommend")),s.Cb(2),s.mc("clrDgItemsOf",t.hostList),s.Cb(3),s.Lc(s.ic(50,73,"menu.close")),s.Cb(2),s.mc("clrModalOpen",t.tipModal)("clrModalSize","sm"),s.Cb(2),s.Lc(s.ic(54,75,"menu.tip")),s.Cb(4),s.Nc("",s.ic(58,77,"bestPractice.tipmessage")," ",t.ips,""),s.Cb(4),s.Lc(s.ic(62,79,"menu.ok")),s.Cb(2),s.mc("clrModalOpen",t.tipModalSuccess)("clrModalSize","sm"),s.Cb(2),s.Lc(s.ic(66,81,"menu.tip")),s.Cb(4),s.Mc("",s.ic(70,83,"bestPractice.exeSuccess")," "),s.Cb(4),s.Lc(s.ic(74,85,"menu.ok")),s.Cb(2),s.mc("clrModalOpen",t.tipModalFail)("clrModalSize","sm"),s.Cb(2),s.Lc(s.ic(78,87,"menu.tip")),s.Cb(4),s.Mc("",s.ic(82,89,"bestPractice.exeFail")," "),s.Cb(4),s.Lc(s.ic(86,91,"menu.ok"))}},directives:[h.m,h.qb,h.sb,h.lb,h.tb,h.o,h.pb,h.r,h.q,h.u,h.t,h.J,h.K,h.B,h.v,h.rb,h.n,h.nb],pipes:[d.c],styles:[".color-square[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-bottom;height:.7rem;width:.7rem;border:.05rem solid #000;border-radius:2rem}"],changeDetection:0}),g)}],y=((f=function t(){c(this,t)}).\u0275mod=s.Mb({type:f}),f.\u0275inj=s.Lb({factory:function(c){return new(c||f)},imports:[[a.i.forChild(T)],a.i]}),f),v=((m=function t(){c(this,t)}).\u0275mod=s.Mb({type:m}),m.\u0275inj=s.Lb({factory:function(c){return new(c||m)},imports:[[l.a,y]]}),m)}}])}();