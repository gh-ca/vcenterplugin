(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{FX80:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return r}));var a=s("fXoL"),n=s("tk/3");let o=(()=>{class t{constructor(t){this.http=t}getData(t={}){return this.http.get("accessvmfs/listvmfs",t)}getChartData(t){return this.http.get("accessvmfs/listvmfsperformance",{params:{volumeIds:t}})}getStorages(){return this.http.get("dmestorage/storages")}getStoragePoolsByStorId(t,e){return this.http.get("dmestorage/storagepools?storageId="+t+"&media_type="+e)}getHostList(){return this.http.get("accessvmware/listhost")}getClusterList(){return this.http.get("accessvmware/listcluster")}getHostListByObjectId(t){return this.http.get("accessvmware/gethostsbydsobjectid?dataStoreObjectId="+t)}getClusterListByObjectId(t){return this.http.get("accessvmware/getclustersbydsobjectid?dataStoreObjectId="+t)}getMountHostOrCluSter(t){return this.http.get("accessvmware/getclustersbydsobjectid?dataStoreObjectId="+t)}getServiceLevelList(t={}){return this.http.put("operatevmfs/listvmfsservicelevel",t)}createVmfs(t={}){return this.http.post("accessvmfs/createvmfs",t)}updateVmfs(t,e={}){return this.http.put("operatevmfs/updatevmfs?volume_id="+t,e)}delVmfs(t={}){return this.http.post("accessvmfs/deletevmfs",t)}getMountHost(t){return this.http.get("accessvmfs/gethostsbystorageid/"+t)}getMountCluster(t){return this.http.get("accessvmfs/gethostgroupsbystorageid/"+t)}unmountVMFS(t={}){return this.http.post("/accessvmfs/ummountvmfs",t)}mountVmfs(t={}){return this.http.post("accessvmfs/mountvmfs",t)}reclaimVmfs(t={}){return this.http.post("operatevmfs/recyclevmfs",t)}changeServiceLevel(t={}){return this.http.post("operatevmfs/updatevmfsservicelevel",t)}expandVMFS(t={}){return this.http.post("operatevmfs/expandvmfs",t)}scanVMFS(t){return this.http.get("accessdme/scandatastore",{params:{storageType:t}})}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(n.b))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac}),t})();class r{getAddForm(){return{name:null,volumeName:null,isSameName:!0,capacity:null,capacityUnit:"GB",count:null,service_level_id:null,service_level_name:null,version:"5",blockSize:"1024",spaceReclamationGranularity:"1024",spaceReclamationPriority:"low",host:null,hostId:null,cluster:null,clusterId:null,storage_id:null,pool_raw_id:null,workload_type_id:null,alloctype:null,control_policy:"1",latencyChoose:!1,latency:null,maxbandwidth:null,maxbandwidthChoose:!1,maxiops:null,maxiopsChoose:!1,minbandwidth:null,minbandwidthChoose:!1,miniops:null,miniopsChoose:!1,qosname:null,deviceName:null,hostDataloadSuccess:!1,culDataloadSuccess:!1}}getEditForm(){return{name:null,isSameName:!0,volume_id:null,control_policy:"1",max_iops:null,max_bandwidth:null,newVoName:null,oldDsName:null,newDsName:null,min_iops:null,min_bandwidth:null,dataStoreObjectId:null,service_level_name:null,latency:null}}getExpandForm(){return{vo_add_capacity:0,capacityUnit:"GB",volume_id:"",ds_name:""}}getChangeLevelForm(){return{volume_ids:[],ds_name:"",service_level_id:"",service_level_name:""}}getMountForm(){return{hostId:null,host:null,clusterId:null,cluster:null,dataStoreObjectIds:[],mountType:null}}getUnmountForm(){return{name:null,hostName:null,hostId:null,hostGroupId:null,hostGroupName:null,dataStoreObjectIds:[],mountType:"1"}}}},tMGR:function(t,e,s){"use strict";s.d(e,"e",(function(){return r})),s.d(e,"a",(function(){return l})),s.d(e,"f",(function(){return i})),s.d(e,"d",(function(){return d})),s.d(e,"c",(function(){return m})),s.d(e,"b",(function(){return k}));var a=s("/Kh9"),n=s("fXoL"),o=s("tk/3");let r=(()=>{class t{constructor(t){this.http=t}getData(){return this.http.get("accessnfs/listnfs")}getChartData(t){return this.http.get("accessnfs/listnfsperformance",{params:{fsIds:t}})}addNfs(t={}){return console.log("addNfs"),console.log(t),this.http.post("operatenfs/createnfsdatastore",t)}updateNfs(t={}){return this.http.post("operatenfs/updatenfsdatastore",t)}mountNfs(t={}){return this.http.post("accessnfs/mountnfs",t)}delNfs(t){return this.http.post("accessnfs/delnfs",t)}getHostListByObjectId(t){return this.http.get("accessvmware/gethostsbydsobjectid",{params:{dataStoreObjectId:t}})}getHostList(){return this.http.get("accessvmware/listhost")}getClusterListByObjectId(t){return this.http.get("accessvmware/getclustersbydsobjectid",{params:{dataStoreObjectId:t}})}getVolsByObjId(t){return this.http.get("accessvmfs/volume/"+t)}getVmkernelListByObjectId(t){return this.http.get("accessvmware/getvmkernelipbyhostobjectid",{params:{hostObjectId:t}})}getNfsDetailById(t){return this.http.get("dmestorage/filesystemdetail",{params:{fileSystemId:t}})}changeCapacity(t={}){return this.http.post("operatenfs/changenfsdatastore",t)}getLineChartData(t,e={}){return this.http.post(t,e)}}return t.vmfsIOPS=["1125921381744648","1125921381744649"],t.vmfsBDWT=["1125921381744646","1125921381744647"],t.vmfsLatency=["1125921381744656","1125921381744657"],t.vmfsUrl="datastorestatistichistrory/vmfs",t.nfsOPS=["1125921381744648","1125921381744649"],t.nfsBDWT=["1125921381744646","1125921381744647"],t.nfsLatency=["1125921381744656","1125921381744657"],t.nfsUrl="datastorestatistichistrory/nfs",t.perRanges=[{key:"LAST_5_MINUTE",value:"\u6700\u8fd15\u5206\u949f"},{key:"LAST_1_HOUR",value:"\u6700\u8fd11\u5c0f\u65f6"},{key:"LAST_1_DAY",value:"\u6700\u8fd11\u5929"},{key:"LAST_1_WEEK",value:"\u6700\u8fd11\u5468"},{key:"LAST_1_MONTH",value:"\u6700\u8fd11\u4e2a\u6708"},{key:"LAST_1_QUARTER",value:"\u6700\u8fd11\u4e2a\u5b63\u5ea6"},{key:"HALF_1_YEAR",value:"\u6700\u8fd1\u534a\u5e74"},{key:"LAST_1_YEAR",value:"\u6700\u8fd11\u5e74"},{key:"BEGIN_END_TIME",value:"\u5f00\u59cb-\u7ed3\u675f\u65f6\u95f4"},{key:"INVALID",value:"\u65e0\u6548"}],t.\u0275fac=function(e){return new(e||t)(n.Yb(o.b))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac}),t})();class l{constructor(){this.sameName=!0,this.advance=!1,this.qosFlag=!1,this.deduplicationEnabled=!1,this.compressionEnabled=!1,this.autoSizeEnable=!1,this.thin=!0}}class i{constructor(){this.sameName=!0}}class c{}class u{}class h{}class d{}class m{constructor(){this.capacity_autonegotiation=new c,this.tuning=new u,this.qos_policy=new h,this.sameName=!0,this.advance=!0,this.qosPolicy=!0}}class p{}class g{}class f{}class b{}class y{}class v{}class w{}class _{}class S{}class x{}class L{}class D{}class N{}class I{}class O{}class j{constructor(){this.show=!0}}let k=(()=>{class t{constructor(t,e,s){this.remoteSrv=t,this.cdr=e,this.gs=s}setChart(t,e,s,a,n,o,r,l,i){const c=this.getNewChart(t,e,s);return new Promise((t,u)=>{this.remoteSrv.getLineChartData(r,{indicator_ids:a,obj_ids:n,range:o,begin_time:l,end_time:i}).subscribe(o=>{if(console.log("chartData: ",e,o),"200"===o.code&&null!==o.data&&null!==o.data.data){const r=o.data;c.title.text=e,c.title.subtext=s;const l=r[n[0]][a[0]],i=r[n[0]][a[1]],u=this.getUpperOrLower(l,"upper");let h=this.getUpperOrLower(i,"lower");this.getUpperOrLower(l,"lower"),this.getUpperOrLower(i,"lower");const d=l.series,m=i.series,p=l.avg,g=i.avg;this.setXAxisData(d,c),c.yAxis.max=u>h?u:h,console.log("chart.yAxis.pmaxData",u),console.log("chart.yAxis.lmaxData",h),d.forEach(t=>{for(const e of Object.keys(t))c.series[2].data.push({value:Number(t[e]),symbol:"none"});for(const e of Object.keys(p))c.series[0].data.push({value:Number(p[e]),symbol:"none"})}),m.forEach(t=>{for(const e of Object.keys(t))c.series[3].data.push({value:Number(t[e]),symbol:"none"});for(const e of Object.keys(g))c.series[1].data.push({value:Number(g[e]),symbol:"none"})}),t(c)}else console.log("get chartData fail: ",o.description)})})}setChartSingle(t,e,s,a,n,o,r,l,i){const c=this.getNewChartSingle(t,e,s);return new Promise((t,u)=>{this.remoteSrv.getLineChartData(r,{indicator_ids:a,obj_ids:n,range:o,begin_time:l,end_time:i}).subscribe(o=>{if(console.log("chartData: ",e,o),c.title.text=e,c.title.subtext=s,"200"===o.code&&null!==o.data&&null!==o.data.data){let t=o.data;o.data.data&&(t=o.data.data);const e=t[n[0]][a[0]].series;this.setXAxisData(e,c),e.forEach(t=>{for(const e of Object.keys(t))c.series[0].data.push({value:Number(t[e]),symbol:"none"})})}else console.log("get chartData fail: ",o.description);t(c)})})}getNewChart(t,e,s){const a=new p;a.height=t;const n=new g;n.text=e,n.subtext=s,n.textAlign="bottom";const o=new f;o.fontStyle="normal",n.textStyle=o,a.title=n;const r=new b;r.type="category",r.boundaryGap=!1,r.data=[],a.xAxis=r;const l=new y;l.type="value",l.min=0,l.splitNumber=2,l.boundaryGap=["50%","50%"];const i=new w;i.show=!1,l.axisLine=i;const c=new v;c.show=!0;const u=new O;u.type="dashed",c.lineStyle=u,l.splitLine=c,a.yAxis=l;const h=new _;h.trigger="axis",h.formatter="{b} <br/> {a0}: {c0}<br/>{a1}: {c1}<br/>{a2}: {c2}<br/>{a3}: {c3}";const d=new S;d.axis="x",d.type="line",h.axisPointer=d,a.tooltip=h;const m=new x,L=[];L.push(this.setLengdData("Upper Limit","line")),L.push(this.setLengdData("Lower Limit","line")),L.push(this.setLengdData("Read","circle")),L.push(this.setLengdData("Write","circle")),m.x="right",m.y="top",m.selectedMode=!0,m.data=L,a.legend=m,a.color=["#DB2000","#F8E082","#6870c4","#01bfa8"];const D=[];return D.push(this.setSerieData("Upper Limit","line",!0,"dotted","#DB2000",null)),D.push(this.setSerieData("Lower Limit","line",!0,"dotted","#F8E082",null)),D.push(this.setSerieData("Read","line",!0,"solid","#6870c4",null)),D.push(this.setSerieData("Write","line",!0,"solid","#01bfa8",null)),a.series=D,a}getNewChartSingle(t,e,s){const a=new p;a.height=t;const n=new g;n.text=e,n.subtext=s,n.textAlign="bottom";const o=new f;o.fontStyle="normal",n.textStyle=o,a.title=n;const r=new b;r.type="category",r.boundaryGap=!1,r.data=[],a.xAxis=r;const l=new y;l.type="value",l.min=0,l.splitNumber=2,l.boundaryGap=["50%","50%"];const i=new w;i.show=!1,l.axisLine=i;const c=new v;c.show=!0;const u=new O;u.type="dashed",c.lineStyle=u,l.splitLine=c,a.yAxis=l;const h=new _;h.trigger="axis",h.formatter="{b} <br/> {a0}: {c0}";const d=new S;d.axis="x",d.type="line",h.axisPointer=d,a.tooltip=h,a.color=["#DB2000"];const m=[];return m.push(this.setSerieData("\u5377\u6700\u5927I/O\u76f8\u5e94\u65f6\u95f4","line",!0,"dotted","#DB2000",null)),a.series=m,a}setSerieData(t,e,s,a,n,o){const r=new D;r.name=t,r.type=e,r.data=[],r.smooth=s;const l=new N,i=new I,c=new O;c.color=n,c.type=a,c.width=2,i.lineStyle=c,l.normal=i,r.itemStyle=l;const u=new j;return u.formatter=o,u.show=!0,r.label=u,r}setLengdData(t,e){const s=new L;return s.name=t,null!==e&&(s.icon=e),s}setXAxisData(t,e){console.log("data",t),t.forEach(t=>{for(const s of Object.keys(t)){const t=new Date(+s),a=t.getFullYear()+"-"+t.getMonth()+"-"+t.getDay()+" "+t.getHours()+":"+t.getMinutes();e.xAxis.data.push(a)}})}getUpperOrLower(t,e){let s;if("lower"===e)for(const a of Object.keys(t.max))s=Number(t.max[a]);else for(const a of Object.keys(t.max))s=Number(t.min[a]);return s}getVolsByObjId(t,e,s,a,n){console.log("objectId: "+t),this.remoteSrv.getVolsByObjId(t).subscribe(t=>{if(console.log(t),"200"===t.code){const s=[];(e=t.data).forEach(t=>{s.push(t.name)}),this.getVolByName(s[0],e),this.cdr.detectChanges()}else console.log(t.description)})}getVolByName(t,e){return e.filter(e=>e.name===t)[0]}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(r),n.Yb(n.h),n.Yb(a.b))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac}),t})()}}]);