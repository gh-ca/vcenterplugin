(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{VH0b:function(c,t,e){"use strict";e.r(t),e.d(t,"BestpracticeModule",(function(){return m}));var i=e("PCNd"),r=e("tyNb"),s=e("6rlL"),l=e("/Kh9"),a=e("fXoL"),o=e("tk/3"),n=e("8MG2"),b=e("sYmb");function h(c,t){if(1&c){const c=a.Vb();a.Ub(0,"clr-dg-row",20),a.Ub(1,"clr-dg-cell"),a.Kc(2),a.Tb(),a.Ub(3,"clr-dg-cell"),a.Kc(4),a.Tb(),a.Ub(5,"clr-dg-cell"),a.Ub(6,"span",21),a.Pb(7,"span",22),a.Kc(8),a.hc(9,"translate"),a.Tb(),a.Ub(10,"span",21),a.Pb(11,"span",23),a.Kc(12),a.hc(13,"translate"),a.Tb(),a.Ub(14,"span",21),a.Pb(15,"span",24),a.Kc(16),a.hc(17,"translate"),a.Tb(),a.Ub(18,"span",21),a.Pb(19,"span",25),a.Kc(20),a.hc(21,"translate"),a.Tb(),a.Tb(),a.Ub(22,"clr-dg-cell"),a.Ub(23,"span",26),a.cc("click",(function(){a.zc(c);const e=t.$implicit;return a.gc().openHostList(e)})),a.Kc(24),a.Tb(),a.Tb(),a.Tb()}if(2&c){const c=t.$implicit;a.mc("clrDgItem",c),a.Cb(2),a.Lc(c.hostSetting),a.Cb(2),a.Lc(c.recommendValue),a.Cb(2),a.mc("hidden","Critical"!=c.level),a.Cb(2),a.Mc("",a.ic(9,12,"bestPractice.critical")," "),a.Cb(2),a.mc("hidden","Major"!=c.level),a.Cb(2),a.Mc("",a.ic(13,14,"bestPractice.major")," "),a.Cb(2),a.mc("hidden","Warning"!=c.level),a.Cb(2),a.Mc("",a.ic(17,16,"bestPractice.warning")," "),a.Cb(2),a.mc("hidden","Info"!=c.level),a.Cb(2),a.Mc("",a.ic(21,18,"bestPractice.info")," "),a.Cb(4),a.Lc(c.count)}}function d(c,t){if(1&c&&(a.Ub(0,"clr-dg-row",20),a.Ub(1,"clr-dg-cell"),a.Kc(2),a.Tb(),a.Ub(3,"clr-dg-cell"),a.Kc(4),a.Tb(),a.Ub(5,"clr-dg-cell"),a.Kc(6),a.Tb(),a.Tb()),2&c){const c=t.$implicit;a.mc("clrDgItem",c),a.Cb(2),a.Lc(c.hostName),a.Cb(2),a.Lc(c.actualValue),a.Cb(2),a.Lc(c.recommendValue)}}const p=function(){return[5,10,50,100]},g=[{path:"",component:(()=>{class c{constructor(c,t,e,i){this.cdr=c,this.gs=t,this.http=e,this.commonService=i,this.rowSelected=[],this.isLoading=!0,this.list=[],this.total=0,this.query={},this.hostModalShow=!1,this.hostSelected=[],this.hostIsLoading=!1,this.hostList=[],this.hostTotal=0,this.tipModal=!1,this.ips="",this.applyType="1",this.tipModalSuccess=!1,this.tipModalFail=!1}ngOnInit(){}packApplyPracticeParams(){const c=[];return this.ips="",this.rowSelected.forEach(t=>{const e={hostSetting:"",hostObjectIds:[]};e.hostSetting=t.hostSetting,t.hostList.forEach(c=>{e.hostObjectIds.push(c.hostObjectId),"true"==c.needReboot&&(this.ips+=c.hostName+",")}),c.push(e)}),c}packApplyPracticeParamsByHost(){const c=[],t={hostSetting:"",hostObjectIds:[]};t.hostSetting=this.currentBestpractice.hostSetting;let e="";return this.hostSelected.forEach(c=>{t.hostObjectIds.push(c.hostObjectId),"true"==c.needReboot&&(e+=c.hostName+",")}),c.push(t),c}applyPractice(c){this.gs.loading=!0,this.http.post("v1/bestpractice/update/bylist",c).subscribe(c=>{this.gs.loading=!1,"200"==c.code?(this.tipModalSuccess=!0,"1"!=this.applyType&&(this.hostModalShow=!1),this.practiceRefresh()):this.tipModalFail=!0,this.cdr.detectChanges()},c=>{console.error("ERROR",c)})}openTip(){this.tipModal=!0}closeTip(){this.tipModal=!1}applyClick(c){let t;this.applyType=c,t="1"==this.applyType?this.packApplyPracticeParams():this.packApplyPracticeParamsByHost(),0!=this.ips.length?this.openTip():this.applyPractice(t)}tipOk(){let c;this.closeTip(),c="1"==this.applyType?this.packApplyPracticeParams():this.packApplyPracticeParamsByHost(),this.applyPractice(c)}recheck(){this.gs.loading=!0,this.http.post("v1/bestpractice/check",{}).subscribe(c=>{this.gs.loading=!1,"200"==c.code?(this.tipModalSuccess=!0,this.practiceRefresh()):this.tipModalFail=!0,this.cdr.detectChanges()},c=>{console.error("ERROR",c)})}practiceRefresh(){this.isLoading=!0,this.http.get("v1/bestpractice/records/all",{}).subscribe(c=>{"200"===c.code&&(this.list=c.data,this.total=c.data.length,this.isLoading=!1,this.cdr.detectChanges())},c=>{console.error("ERROR",c)})}openHostList(c){this.hostModalShow=!0,this.currentBestpractice=c,this.hostRefresh()}hostRefresh(){!0===this.hostModalShow&&(this.hostIsLoading=!0,this.hostList=this.currentBestpractice.hostList,this.hostTotal=this.currentBestpractice.hostList.length,this.hostIsLoading=!1,this.cdr.detectChanges())}}return c.\u0275fac=function(t){return new(t||c)(a.Ob(a.h),a.Ob(l.b),a.Ob(o.b),a.Ob(s.a))},c.\u0275cmp=a.Ib({type:c,selectors:[["app-bestpractice"]],features:[a.Bb([s.a])],decls:87,vars:94,consts:[[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"click"],[3,"clrDgSelected","clrDgLoading","clrDgSelectedChange","clrDgRefresh"],[3,"clrDgField"],[3,"clrDgField","clrDgSortOrder"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],[2,"width","576px","height","300px",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],[3,"clrModalOpen","clrModalSize","clrModalOpenChange"],["type","button",1,"btn","btn-outline-warning",3,"click"],["shape","success-standard",1,"is-solid",2,"color","#59A220","margin-right","5px"],["type","button",1,"btn","btn-success",3,"click"],["shape","error-standard",1,"is-solid",2,"color","red","margin-right","5px"],["type","button",1,"btn","btn-danger",3,"click"],[3,"clrDgItem"],[3,"hidden"],[1,"color-square",2,"background-color","#CA2200","margin-right","10px"],[1,"color-square",2,"background-color","#F0C004","margin-right","10px"],[1,"color-square",2,"background-color","#FEE273","margin-right","10px"],[1,"color-square",2,"background-color","#79C6E6","margin-right","10px"],[2,"color","#00F","cursor","pointer",3,"click"]],template:function(c,t){if(1&c&&(a.Ub(0,"div"),a.Ub(1,"div"),a.Ub(2,"button",0),a.cc("click",(function(){return t.applyClick("1")})),a.Kc(3),a.hc(4,"translate"),a.Tb(),a.Ub(5,"button",1),a.cc("click",(function(){return t.recheck()})),a.Kc(6),a.hc(7,"translate"),a.Tb(),a.Tb(),a.Ub(8,"clr-datagrid",2),a.cc("clrDgSelectedChange",(function(c){return t.rowSelected=c}))("clrDgRefresh",(function(){return t.practiceRefresh()})),a.Ub(9,"clr-dg-column",3),a.Kc(10),a.hc(11,"translate"),a.Tb(),a.Ub(12,"clr-dg-column",3),a.Kc(13),a.hc(14,"translate"),a.Tb(),a.Ub(15,"clr-dg-column",3),a.Kc(16),a.hc(17,"translate"),a.Tb(),a.Ub(18,"clr-dg-column",4),a.Kc(19),a.hc(20,"translate"),a.Tb(),a.Ic(21,h,25,20,"clr-dg-row",5),a.Ub(22,"clr-dg-footer"),a.Ub(23,"clr-dg-pagination",6,7),a.Pb(25,"clr-dg-page-size",8),a.Kc(26),a.Tb(),a.Tb(),a.Tb(),a.Ub(27,"clr-modal",9),a.cc("clrModalOpenChange",(function(c){return t.hostModalShow=c})),a.Ub(28,"h3",10),a.Kc(29),a.hc(30,"translate"),a.Tb(),a.Ub(31,"div",11),a.Ub(32,"div"),a.Ub(33,"button",0),a.cc("click",(function(){return t.applyClick("2")})),a.Kc(34),a.hc(35,"translate"),a.Tb(),a.Tb(),a.Ub(36,"clr-datagrid",2),a.cc("clrDgSelectedChange",(function(c){return t.hostSelected=c}))("clrDgRefresh",(function(){return t.hostRefresh()})),a.Ub(37,"clr-dg-column",3),a.Kc(38),a.hc(39,"translate"),a.Tb(),a.Ub(40,"clr-dg-column",3),a.Kc(41),a.hc(42,"translate"),a.Tb(),a.Ub(43,"clr-dg-column",3),a.Kc(44),a.hc(45,"translate"),a.Tb(),a.Ic(46,d,7,4,"clr-dg-row",5),a.Tb(),a.Tb(),a.Ub(47,"div",12),a.Ub(48,"button",13),a.cc("click",(function(){return t.hostModalShow=!1})),a.Kc(49),a.hc(50,"translate"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(51,"clr-modal",14),a.cc("clrModalOpenChange",(function(c){return t.tipModal=c})),a.Ub(52,"h3",10),a.Kc(53),a.hc(54,"translate"),a.Tb(),a.Ub(55,"div",11),a.Ub(56,"p"),a.Kc(57),a.hc(58,"translate"),a.Tb(),a.Tb(),a.Ub(59,"div",12),a.Ub(60,"button",15),a.cc("click",(function(){return t.tipOk()})),a.Kc(61),a.hc(62,"translate"),a.Tb(),a.Tb(),a.Tb(),a.Ub(63,"clr-modal",14),a.cc("clrModalOpenChange",(function(c){return t.tipModalSuccess=c})),a.Ub(64,"h3",10),a.Kc(65),a.hc(66,"translate"),a.Tb(),a.Ub(67,"div",11),a.Pb(68,"clr-icon",16),a.Kc(69),a.hc(70,"translate"),a.Tb(),a.Ub(71,"div",12),a.Ub(72,"button",17),a.cc("click",(function(){return t.tipModalSuccess=!1})),a.Kc(73),a.hc(74,"translate"),a.Tb(),a.Tb(),a.Tb(),a.Ub(75,"clr-modal",14),a.cc("clrModalOpenChange",(function(c){return t.tipModalFail=c})),a.Ub(76,"h3",10),a.Kc(77),a.hc(78,"translate"),a.Tb(),a.Ub(79,"div",11),a.Pb(80,"clr-icon",18),a.Kc(81),a.hc(82,"translate"),a.Tb(),a.Ub(83,"div",12),a.Ub(84,"button",19),a.cc("click",(function(){return t.tipModalFail=!1})),a.Kc(85),a.hc(86,"translate"),a.Tb(),a.Tb(),a.Tb()),2&c){const c=a.wc(24);a.Cb(2),a.mc("disabled",0===t.rowSelected.length),a.Cb(1),a.Lc(a.ic(4,51,"bestPractice.apply")),a.Cb(3),a.Lc(a.ic(7,53,"bestPractice.check")),a.Cb(2),a.mc("clrDgSelected",t.rowSelected)("clrDgLoading",t.isLoading),a.Cb(1),a.mc("clrDgField","hostSetting"),a.Cb(1),a.Lc(a.ic(11,55,"bestPractice.hostSetting")),a.Cb(2),a.mc("clrDgField","recommendValue"),a.Cb(1),a.Lc(a.ic(14,57,"bestPractice.recommend")),a.Cb(2),a.mc("clrDgField","level"),a.Cb(1),a.Lc(a.ic(17,59,"bestPractice.level")),a.Cb(2),a.mc("clrDgField","violation")("clrDgSortOrder","violation"),a.Cb(1),a.Lc(a.ic(20,61,"bestPractice.violation")),a.Cb(2),a.mc("clrDgItemsOf",t.list),a.Cb(2),a.mc("clrDgPageSize",5)("clrDgTotalItems",t.total),a.Cb(2),a.mc("clrPageSizeOptions",a.pc(93,p)),a.Cb(1),a.Oc(" ",c.firstItem+1," - ",c.lastItem+1," of ",c.totalItems," "),a.Cb(1),a.mc("clrModalOpen",t.hostModalShow),a.Cb(2),a.Lc(a.ic(30,63,"bestPractice.non-compliant")),a.Cb(4),a.mc("disabled",0===t.hostSelected.length),a.Cb(1),a.Lc(a.ic(35,65,"bestPractice.apply")),a.Cb(2),a.mc("clrDgSelected",t.hostSelected)("clrDgLoading",t.hostIsLoading),a.Cb(1),a.mc("clrDgField","hostName"),a.Cb(1),a.Lc(a.ic(39,67,"bestPractice.host")),a.Cb(2),a.mc("clrDgField","actualValue"),a.Cb(1),a.Lc(a.ic(42,69,"bestPractice.actual")),a.Cb(2),a.mc("clrDgField","recommendValue"),a.Cb(1),a.Lc(a.ic(45,71,"bestPractice.recommend")),a.Cb(2),a.mc("clrDgItemsOf",t.hostList),a.Cb(3),a.Lc(a.ic(50,73,"menu.close")),a.Cb(2),a.mc("clrModalOpen",t.tipModal)("clrModalSize","sm"),a.Cb(2),a.Lc(a.ic(54,75,"menu.tip")),a.Cb(4),a.Nc("",a.ic(58,77,"bestPractice.tipmessage")," ",t.ips,""),a.Cb(4),a.Lc(a.ic(62,79,"menu.ok")),a.Cb(2),a.mc("clrModalOpen",t.tipModalSuccess)("clrModalSize","sm"),a.Cb(2),a.Lc(a.ic(66,81,"menu.tip")),a.Cb(4),a.Mc("",a.ic(70,83,"bestPractice.exeSuccess")," "),a.Cb(4),a.Lc(a.ic(74,85,"menu.ok")),a.Cb(2),a.mc("clrModalOpen",t.tipModalFail)("clrModalSize","sm"),a.Cb(2),a.Lc(a.ic(78,87,"menu.tip")),a.Cb(4),a.Mc("",a.ic(82,89,"bestPractice.exeFail")," "),a.Cb(4),a.Lc(a.ic(86,91,"menu.ok"))}},directives:[n.m,n.qb,n.sb,n.lb,n.tb,n.o,n.pb,n.r,n.q,n.u,n.t,n.J,n.K,n.B,n.v,n.rb,n.n,n.nb],pipes:[b.c],styles:[".color-square[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-bottom;height:.7rem;width:.7rem;border:.05rem solid #000;border-radius:2rem}"],changeDetection:0}),c})()}];let u=(()=>{class c{}return c.\u0275mod=a.Mb({type:c}),c.\u0275inj=a.Lb({factory:function(t){return new(t||c)},imports:[[r.i.forChild(g)],r.i]}),c})(),m=(()=>{class c{}return c.\u0275mod=a.Mb({type:c}),c.\u0275inj=a.Lb({factory:function(t){return new(t||c)},imports:[[i.a,u]]}),c})()}}]);