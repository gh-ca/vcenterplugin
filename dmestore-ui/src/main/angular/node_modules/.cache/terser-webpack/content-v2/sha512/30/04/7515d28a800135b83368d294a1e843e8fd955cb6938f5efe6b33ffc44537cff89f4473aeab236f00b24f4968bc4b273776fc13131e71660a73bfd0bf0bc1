{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{VH0b:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"BestpracticeModule\",(function(){return bestpractice_module_BestpracticeModule}));var shared_module=__webpack_require__(\"PCNd\"),router=__webpack_require__(\"tyNb\"),common_service=__webpack_require__(\"6rlL\"),core=__webpack_require__(\"fXoL\"),http=__webpack_require__(\"tk/3\"),clr_angular=__webpack_require__(\"8MG2\"),ngx_translate_core=__webpack_require__(\"sYmb\");function BestpracticeComponent_clr_dg_row_21_Template(rf,ctx){if(1&rf){const _r5=core.Vb();core.Ub(0,\"clr-dg-row\",14),core.Ub(1,\"clr-dg-cell\"),core.Kc(2),core.Tb(),core.Ub(3,\"clr-dg-cell\"),core.Kc(4),core.Tb(),core.Ub(5,\"clr-dg-cell\"),core.Ub(6,\"span\",15),core.Pb(7,\"span\",16),core.Kc(8),core.hc(9,\"translate\"),core.Tb(),core.Ub(10,\"span\",15),core.Pb(11,\"span\",17),core.Kc(12),core.hc(13,\"translate\"),core.Tb(),core.Ub(14,\"span\",15),core.Pb(15,\"span\",18),core.Kc(16),core.hc(17,\"translate\"),core.Tb(),core.Ub(18,\"span\",15),core.Pb(19,\"span\",19),core.Kc(20),core.hc(21,\"translate\"),core.Tb(),core.Tb(),core.Ub(22,\"clr-dg-cell\"),core.Ub(23,\"span\",20),core.cc(\"click\",(function(){core.zc(_r5);const item_r3=ctx.$implicit;return core.gc().openHostList(item_r3)})),core.Kc(24),core.Tb(),core.Tb(),core.Tb()}if(2&rf){const item_r3=ctx.$implicit;core.mc(\"clrDgItem\",item_r3),core.Cb(2),core.Lc(item_r3.hostSetting),core.Cb(2),core.Lc(item_r3.recommendValue),core.Cb(2),core.mc(\"hidden\",\"Critical\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(9,12,\"bestPractice.critical\"),\" \"),core.Cb(2),core.mc(\"hidden\",\"Major\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(13,14,\"bestPractice.major\"),\" \"),core.Cb(2),core.mc(\"hidden\",\"Warning\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(17,16,\"bestPractice.warning\"),\" \"),core.Cb(2),core.mc(\"hidden\",\"Info\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(21,18,\"bestPractice.info\"),\" \"),core.Cb(4),core.Lc(item_r3.count)}}function BestpracticeComponent_clr_dg_row_46_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"clr-dg-row\",14),core.Ub(1,\"clr-dg-cell\"),core.Kc(2),core.Tb(),core.Ub(3,\"clr-dg-cell\"),core.Kc(4),core.Tb(),core.Ub(5,\"clr-dg-cell\"),core.Kc(6),core.Tb(),core.Tb()),2&rf){const item_r6=ctx.$implicit;core.mc(\"clrDgItem\",item_r6),core.Cb(2),core.Lc(item_r6.hostName),core.Cb(2),core.Lc(item_r6.actualValue),core.Cb(2),core.Lc(item_r6.recommendValue)}}const _c0=function(){return[5,10,50,100]},routes=[{path:\"\",component:(()=>{class BestpracticeComponent{constructor(cdr,http,commonService){this.cdr=cdr,this.http=http,this.commonService=commonService,this.rowSelected=[],this.isLoading=!0,this.list=[],this.total=0,this.query={},this.hostModalShow=!1,this.hostSelected=[],this.hostIsLoading=!1,this.hostList=[],this.hostTotal=0}ngOnInit(){}applySelectedPractice(){const params=[];let ips=\"\";this.rowSelected.forEach(item=>{const i={hostSetting:\"\",hostObjectIds:[]};i.hostSetting=item.hostSetting,item.hostList.forEach(s=>{i.hostObjectIds.push(s.hostObjectId),\"true\"==s.needReboot&&(ips+=s.hostName+\",\")}),params.push(i)}),0!=ips.length&&alert(\"modify config, you need reboot \"+ips),console.log(params),this.http.post(\"v1/bestpractice/update/bylist\",params).subscribe(result=>{\"200\"==result.code&&this.practiceRefresh()},err=>{console.error(\"ERROR\",err)})}applyByHosts(){const params=[],i={hostSetting:\"\",hostObjectIds:[]};i.hostSetting=this.currentBestpractice.hostSetting;let ips=\"\";this.hostSelected.forEach(s=>{i.hostObjectIds.push(s.hostObjectId),\"true\"==s.needReboot&&(ips+=s.hostName+\",\")}),params.push(i),0!=ips.length&&alert(\"modify config, you need reboot \"+ips),console.log(params),this.http.post(\"v1/bestpractice/update/bylist\",params).subscribe(result=>{\"200\"==result.code&&this.practiceRefresh()},err=>{console.error(\"ERROR\",err)})}recheck(){this.http.post(\"v1/bestpractice/check\",{}).subscribe(result=>{},err=>{console.error(\"ERROR\",err)})}practiceRefresh(){this.isLoading=!0,this.http.get(\"v1/bestpractice/records/all\",{}).subscribe(result=>{\"200\"===result.code&&(this.list=result.data,this.total=result.data.length,this.isLoading=!1,this.cdr.detectChanges())},err=>{console.error(\"ERROR\",err)})}openHostList(bestpractice){this.hostModalShow=!0,this.currentBestpractice=bestpractice,this.hostRefresh()}hostRefresh(){!0===this.hostModalShow&&(this.hostIsLoading=!0,this.hostList=this.currentBestpractice.hostList,this.hostTotal=this.currentBestpractice.hostList.length,this.hostIsLoading=!1,this.cdr.detectChanges())}}return BestpracticeComponent.ɵfac=function(t){return new(t||BestpracticeComponent)(core.Ob(core.h),core.Ob(http.b),core.Ob(common_service.a))},BestpracticeComponent.ɵcmp=core.Ib({type:BestpracticeComponent,selectors:[[\"app-bestpractice\"]],features:[core.Bb([common_service.a])],decls:51,vars:60,consts:[[1,\"btn\",\"btn-primary\",3,\"disabled\",\"click\"],[1,\"btn\",\"btn-primary\",3,\"click\"],[3,\"clrDgSelected\",\"clrDgLoading\",\"clrDgSelectedChange\",\"clrDgRefresh\"],[3,\"clrDgField\"],[3,\"clrDgField\",\"clrDgSortOrder\"],[3,\"clrDgItem\",4,\"clrDgItems\",\"clrDgItemsOf\"],[3,\"clrDgPageSize\",\"clrDgTotalItems\"],[\"pagination\",\"\"],[3,\"clrPageSizeOptions\"],[2,\"width\",\"576px\",\"height\",\"300px\",3,\"clrModalOpen\",\"clrModalOpenChange\"],[1,\"modal-title\"],[1,\"modal-body\"],[1,\"modal-footer\"],[\"type\",\"button\",1,\"btn\",\"btn-outline\",3,\"click\"],[3,\"clrDgItem\"],[3,\"hidden\"],[1,\"color-square\",2,\"background-color\",\"#CA2200\",\"margin-right\",\"10px\"],[1,\"color-square\",2,\"background-color\",\"#F0C004\",\"margin-right\",\"10px\"],[1,\"color-square\",2,\"background-color\",\"#FEE273\",\"margin-right\",\"10px\"],[1,\"color-square\",2,\"background-color\",\"#79C6E6\",\"margin-right\",\"10px\"],[2,\"color\",\"#00F\",\"cursor\",\"pointer\",3,\"click\"]],template:function(rf,ctx){if(1&rf&&(core.Ub(0,\"div\"),core.Ub(1,\"div\"),core.Ub(2,\"button\",0),core.cc(\"click\",(function(){return ctx.applySelectedPractice()})),core.Kc(3),core.hc(4,\"translate\"),core.Tb(),core.Ub(5,\"button\",1),core.cc(\"click\",(function(){return ctx.recheck()})),core.Kc(6),core.hc(7,\"translate\"),core.Tb(),core.Tb(),core.Ub(8,\"clr-datagrid\",2),core.cc(\"clrDgSelectedChange\",(function($event){return ctx.rowSelected=$event}))(\"clrDgRefresh\",(function(){return ctx.practiceRefresh()})),core.Ub(9,\"clr-dg-column\",3),core.Kc(10),core.hc(11,\"translate\"),core.Tb(),core.Ub(12,\"clr-dg-column\",3),core.Kc(13),core.hc(14,\"translate\"),core.Tb(),core.Ub(15,\"clr-dg-column\",3),core.Kc(16),core.hc(17,\"translate\"),core.Tb(),core.Ub(18,\"clr-dg-column\",4),core.Kc(19),core.hc(20,\"translate\"),core.Tb(),core.Ic(21,BestpracticeComponent_clr_dg_row_21_Template,25,20,\"clr-dg-row\",5),core.Ub(22,\"clr-dg-footer\"),core.Ub(23,\"clr-dg-pagination\",6,7),core.Pb(25,\"clr-dg-page-size\",8),core.Kc(26),core.Tb(),core.Tb(),core.Tb(),core.Ub(27,\"clr-modal\",9),core.cc(\"clrModalOpenChange\",(function($event){return ctx.hostModalShow=$event})),core.Ub(28,\"h3\",10),core.Kc(29),core.hc(30,\"translate\"),core.Tb(),core.Ub(31,\"div\",11),core.Ub(32,\"div\"),core.Ub(33,\"button\",0),core.cc(\"click\",(function(){return ctx.applyByHosts()})),core.Kc(34),core.hc(35,\"translate\"),core.Tb(),core.Tb(),core.Ub(36,\"clr-datagrid\",2),core.cc(\"clrDgSelectedChange\",(function($event){return ctx.hostSelected=$event}))(\"clrDgRefresh\",(function(){return ctx.hostRefresh()})),core.Ub(37,\"clr-dg-column\",3),core.Kc(38),core.hc(39,\"translate\"),core.Tb(),core.Ub(40,\"clr-dg-column\",3),core.Kc(41),core.hc(42,\"translate\"),core.Tb(),core.Ub(43,\"clr-dg-column\",3),core.Kc(44),core.hc(45,\"translate\"),core.Tb(),core.Ic(46,BestpracticeComponent_clr_dg_row_46_Template,7,4,\"clr-dg-row\",5),core.Tb(),core.Tb(),core.Ub(47,\"div\",12),core.Ub(48,\"button\",13),core.cc(\"click\",(function(){return ctx.hostModalShow=!1})),core.Kc(49),core.hc(50,\"translate\"),core.Tb(),core.Tb(),core.Tb(),core.Tb()),2&rf){const _r1=core.wc(24);core.Cb(2),core.mc(\"disabled\",0===ctx.rowSelected.length),core.Cb(1),core.Lc(core.ic(4,35,\"bestPractice.apply\")),core.Cb(3),core.Lc(core.ic(7,37,\"bestPractice.check\")),core.Cb(2),core.mc(\"clrDgSelected\",ctx.rowSelected)(\"clrDgLoading\",ctx.isLoading),core.Cb(1),core.mc(\"clrDgField\",\"hostSetting\"),core.Cb(1),core.Lc(core.ic(11,39,\"bestPractice.hostSetting\")),core.Cb(2),core.mc(\"clrDgField\",\"recommendValue\"),core.Cb(1),core.Lc(core.ic(14,41,\"bestPractice.recommend\")),core.Cb(2),core.mc(\"clrDgField\",\"level\"),core.Cb(1),core.Lc(core.ic(17,43,\"bestPractice.level\")),core.Cb(2),core.mc(\"clrDgField\",\"violation\")(\"clrDgSortOrder\",\"violation\"),core.Cb(1),core.Lc(core.ic(20,45,\"bestPractice.violation\")),core.Cb(2),core.mc(\"clrDgItemsOf\",ctx.list),core.Cb(2),core.mc(\"clrDgPageSize\",5)(\"clrDgTotalItems\",ctx.total),core.Cb(2),core.mc(\"clrPageSizeOptions\",core.pc(59,_c0)),core.Cb(1),core.Oc(\" \",_r1.firstItem+1,\" - \",_r1.lastItem+1,\" of \",_r1.totalItems,\" \"),core.Cb(1),core.mc(\"clrModalOpen\",ctx.hostModalShow),core.Cb(2),core.Lc(core.ic(30,47,\"bestPractice.non-compliant\")),core.Cb(4),core.mc(\"disabled\",0===ctx.hostSelected.length),core.Cb(1),core.Lc(core.ic(35,49,\"bestPractice.apply\")),core.Cb(2),core.mc(\"clrDgSelected\",ctx.hostSelected)(\"clrDgLoading\",ctx.hostIsLoading),core.Cb(1),core.mc(\"clrDgField\",\"hostName\"),core.Cb(1),core.Lc(core.ic(39,51,\"bestPractice.host\")),core.Cb(2),core.mc(\"clrDgField\",\"actualValue\"),core.Cb(1),core.Lc(core.ic(42,53,\"bestPractice.actual\")),core.Cb(2),core.mc(\"clrDgField\",\"recommendValue\"),core.Cb(1),core.Lc(core.ic(45,55,\"bestPractice.recommend\")),core.Cb(2),core.mc(\"clrDgItemsOf\",ctx.hostList),core.Cb(3),core.Lc(core.ic(50,57,\"menu.close\"))}},directives:[clr_angular.m,clr_angular.qb,clr_angular.sb,clr_angular.lb,clr_angular.tb,clr_angular.o,clr_angular.pb,clr_angular.r,clr_angular.q,clr_angular.u,clr_angular.t,clr_angular.J,clr_angular.K,clr_angular.v,clr_angular.rb,clr_angular.n,clr_angular.nb],pipes:[ngx_translate_core.c],styles:[\".color-square[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-bottom;height:.7rem;width:.7rem;border:.05rem solid #000;border-radius:2rem}\"],changeDetection:0}),BestpracticeComponent})()}];let bestpractice_routing_module_BestpracticeRoutingModule=(()=>{class BestpracticeRoutingModule{}return BestpracticeRoutingModule.ɵmod=core.Mb({type:BestpracticeRoutingModule}),BestpracticeRoutingModule.ɵinj=core.Lb({factory:function(t){return new(t||BestpracticeRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),BestpracticeRoutingModule})(),bestpractice_module_BestpracticeModule=(()=>{class BestpracticeModule{}return BestpracticeModule.ɵmod=core.Mb({type:BestpracticeModule}),BestpracticeModule.ɵinj=core.Lb({factory:function(t){return new(t||BestpracticeModule)},imports:[[shared_module.a,bestpractice_routing_module_BestpracticeRoutingModule]]}),BestpracticeModule})()}}]);","extractedComments":[]}