{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{VH0b:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"BestpracticeModule\",(function(){return bestpractice_module_BestpracticeModule}));var shared_module=__webpack_require__(\"PCNd\"),router=__webpack_require__(\"tyNb\"),common_service=__webpack_require__(\"6rlL\"),globals_service=__webpack_require__(\"/Kh9\"),core=__webpack_require__(\"fXoL\"),http=__webpack_require__(\"tk/3\"),clr_angular=__webpack_require__(\"8MG2\"),ngx_translate_core=__webpack_require__(\"sYmb\");function BestpracticeComponent_clr_dg_row_21_Template(rf,ctx){if(1&rf){const _r5=core.Vb();core.Ub(0,\"clr-dg-row\",20),core.Ub(1,\"clr-dg-cell\"),core.Kc(2),core.Tb(),core.Ub(3,\"clr-dg-cell\"),core.Kc(4),core.Tb(),core.Ub(5,\"clr-dg-cell\"),core.Ub(6,\"span\",21),core.Pb(7,\"span\",22),core.Kc(8),core.hc(9,\"translate\"),core.Tb(),core.Ub(10,\"span\",21),core.Pb(11,\"span\",23),core.Kc(12),core.hc(13,\"translate\"),core.Tb(),core.Ub(14,\"span\",21),core.Pb(15,\"span\",24),core.Kc(16),core.hc(17,\"translate\"),core.Tb(),core.Ub(18,\"span\",21),core.Pb(19,\"span\",25),core.Kc(20),core.hc(21,\"translate\"),core.Tb(),core.Tb(),core.Ub(22,\"clr-dg-cell\"),core.Ub(23,\"span\",26),core.cc(\"click\",(function(){core.zc(_r5);const item_r3=ctx.$implicit;return core.gc().openHostList(item_r3)})),core.Kc(24),core.Tb(),core.Tb(),core.Tb()}if(2&rf){const item_r3=ctx.$implicit;core.mc(\"clrDgItem\",item_r3),core.Cb(2),core.Lc(item_r3.hostSetting),core.Cb(2),core.Lc(item_r3.recommendValue),core.Cb(2),core.mc(\"hidden\",\"Critical\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(9,12,\"bestPractice.critical\"),\" \"),core.Cb(2),core.mc(\"hidden\",\"Major\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(13,14,\"bestPractice.major\"),\" \"),core.Cb(2),core.mc(\"hidden\",\"Warning\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(17,16,\"bestPractice.warning\"),\" \"),core.Cb(2),core.mc(\"hidden\",\"Info\"!=item_r3.level),core.Cb(2),core.Mc(\"\",core.ic(21,18,\"bestPractice.info\"),\" \"),core.Cb(4),core.Lc(item_r3.count)}}function BestpracticeComponent_clr_dg_row_46_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"clr-dg-row\",20),core.Ub(1,\"clr-dg-cell\"),core.Kc(2),core.Tb(),core.Ub(3,\"clr-dg-cell\"),core.Kc(4),core.Tb(),core.Ub(5,\"clr-dg-cell\"),core.Kc(6),core.Tb(),core.Tb()),2&rf){const item_r6=ctx.$implicit;core.mc(\"clrDgItem\",item_r6),core.Cb(2),core.Lc(item_r6.hostName),core.Cb(2),core.Lc(item_r6.actualValue),core.Cb(2),core.Lc(item_r6.recommendValue)}}const _c0=function(){return[5,10,50,100]},routes=[{path:\"\",component:(()=>{class BestpracticeComponent{constructor(cdr,gs,http,commonService){this.cdr=cdr,this.gs=gs,this.http=http,this.commonService=commonService,this.rowSelected=[],this.isLoading=!0,this.list=[],this.total=0,this.query={},this.hostModalShow=!1,this.hostSelected=[],this.hostIsLoading=!1,this.hostList=[],this.hostTotal=0,this.tipModal=!1,this.ips=\"\",this.applyType=\"1\",this.tipModalSuccess=!1,this.tipModalFail=!1}ngOnInit(){}packApplyPracticeParams(){const params=[];return this.ips=\"\",this.rowSelected.forEach(item=>{const i={hostSetting:\"\",hostObjectIds:[]};i.hostSetting=item.hostSetting,item.hostList.forEach(s=>{i.hostObjectIds.push(s.hostObjectId),\"true\"==s.needReboot&&(this.ips+=s.hostName+\",\")}),params.push(i)}),params}packApplyPracticeParamsByHost(){const params=[],i={hostSetting:\"\",hostObjectIds:[]};i.hostSetting=this.currentBestpractice.hostSetting;let ips=\"\";return this.hostSelected.forEach(s=>{i.hostObjectIds.push(s.hostObjectId),\"true\"==s.needReboot&&(ips+=s.hostName+\",\")}),params.push(i),params}applyPractice(params){this.gs.loading=!0,this.http.post(\"v1/bestpractice/update/bylist\",params).subscribe(result=>{this.gs.loading=!1,\"200\"==result.code?(this.tipModalSuccess=!0,\"1\"!=this.applyType&&(this.hostModalShow=!1),this.practiceRefresh()):this.tipModalFail=!0,this.cdr.detectChanges()},err=>{console.error(\"ERROR\",err)})}openTip(){this.tipModal=!0}closeTip(){this.tipModal=!1}applyClick(type){let params;this.applyType=type,params=\"1\"==this.applyType?this.packApplyPracticeParams():this.packApplyPracticeParamsByHost(),0!=this.ips.length?this.openTip():this.applyPractice(params)}tipOk(){let params;this.closeTip(),params=\"1\"==this.applyType?this.packApplyPracticeParams():this.packApplyPracticeParamsByHost(),this.applyPractice(params)}recheck(){this.gs.loading=!0,this.http.post(\"v1/bestpractice/check\",{}).subscribe(result=>{this.gs.loading=!1,\"200\"==result.code?(this.tipModalSuccess=!0,this.practiceRefresh()):this.tipModalFail=!0,this.cdr.detectChanges()},err=>{console.error(\"ERROR\",err)})}practiceRefresh(){this.isLoading=!0,this.http.get(\"v1/bestpractice/records/all\",{}).subscribe(result=>{\"200\"===result.code&&(this.list=result.data,this.total=result.data.length,this.isLoading=!1,this.cdr.detectChanges())},err=>{console.error(\"ERROR\",err)})}openHostList(bestpractice){this.hostModalShow=!0,this.currentBestpractice=bestpractice,this.hostRefresh()}hostRefresh(){!0===this.hostModalShow&&(this.hostIsLoading=!0,this.hostList=this.currentBestpractice.hostList,this.hostTotal=this.currentBestpractice.hostList.length,this.hostIsLoading=!1,this.cdr.detectChanges())}}return BestpracticeComponent.ɵfac=function(t){return new(t||BestpracticeComponent)(core.Ob(core.h),core.Ob(globals_service.b),core.Ob(http.b),core.Ob(common_service.a))},BestpracticeComponent.ɵcmp=core.Ib({type:BestpracticeComponent,selectors:[[\"app-bestpractice\"]],features:[core.Bb([common_service.a])],decls:87,vars:94,consts:[[1,\"btn\",\"btn-primary\",3,\"disabled\",\"click\"],[1,\"btn\",\"btn-primary\",3,\"click\"],[3,\"clrDgSelected\",\"clrDgLoading\",\"clrDgSelectedChange\",\"clrDgRefresh\"],[3,\"clrDgField\"],[3,\"clrDgField\",\"clrDgSortOrder\"],[3,\"clrDgItem\",4,\"clrDgItems\",\"clrDgItemsOf\"],[3,\"clrDgPageSize\",\"clrDgTotalItems\"],[\"pagination\",\"\"],[3,\"clrPageSizeOptions\"],[2,\"width\",\"576px\",\"height\",\"300px\",3,\"clrModalOpen\",\"clrModalOpenChange\"],[1,\"modal-title\"],[1,\"modal-body\"],[1,\"modal-footer\"],[\"type\",\"button\",1,\"btn\",\"btn-outline\",3,\"click\"],[3,\"clrModalOpen\",\"clrModalSize\",\"clrModalOpenChange\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-warning\",3,\"click\"],[\"shape\",\"success-standard\",1,\"is-solid\",2,\"color\",\"#59A220\",\"margin-right\",\"5px\"],[\"type\",\"button\",1,\"btn\",\"btn-success\",3,\"click\"],[\"shape\",\"error-standard\",1,\"is-solid\",2,\"color\",\"red\",\"margin-right\",\"5px\"],[\"type\",\"button\",1,\"btn\",\"btn-danger\",3,\"click\"],[3,\"clrDgItem\"],[3,\"hidden\"],[1,\"color-square\",2,\"background-color\",\"#CA2200\",\"margin-right\",\"10px\"],[1,\"color-square\",2,\"background-color\",\"#F0C004\",\"margin-right\",\"10px\"],[1,\"color-square\",2,\"background-color\",\"#FEE273\",\"margin-right\",\"10px\"],[1,\"color-square\",2,\"background-color\",\"#79C6E6\",\"margin-right\",\"10px\"],[2,\"color\",\"#00F\",\"cursor\",\"pointer\",3,\"click\"]],template:function(rf,ctx){if(1&rf&&(core.Ub(0,\"div\"),core.Ub(1,\"div\"),core.Ub(2,\"button\",0),core.cc(\"click\",(function(){return ctx.applyClick(\"1\")})),core.Kc(3),core.hc(4,\"translate\"),core.Tb(),core.Ub(5,\"button\",1),core.cc(\"click\",(function(){return ctx.recheck()})),core.Kc(6),core.hc(7,\"translate\"),core.Tb(),core.Tb(),core.Ub(8,\"clr-datagrid\",2),core.cc(\"clrDgSelectedChange\",(function($event){return ctx.rowSelected=$event}))(\"clrDgRefresh\",(function(){return ctx.practiceRefresh()})),core.Ub(9,\"clr-dg-column\",3),core.Kc(10),core.hc(11,\"translate\"),core.Tb(),core.Ub(12,\"clr-dg-column\",3),core.Kc(13),core.hc(14,\"translate\"),core.Tb(),core.Ub(15,\"clr-dg-column\",3),core.Kc(16),core.hc(17,\"translate\"),core.Tb(),core.Ub(18,\"clr-dg-column\",4),core.Kc(19),core.hc(20,\"translate\"),core.Tb(),core.Ic(21,BestpracticeComponent_clr_dg_row_21_Template,25,20,\"clr-dg-row\",5),core.Ub(22,\"clr-dg-footer\"),core.Ub(23,\"clr-dg-pagination\",6,7),core.Pb(25,\"clr-dg-page-size\",8),core.Kc(26),core.Tb(),core.Tb(),core.Tb(),core.Ub(27,\"clr-modal\",9),core.cc(\"clrModalOpenChange\",(function($event){return ctx.hostModalShow=$event})),core.Ub(28,\"h3\",10),core.Kc(29),core.hc(30,\"translate\"),core.Tb(),core.Ub(31,\"div\",11),core.Ub(32,\"div\"),core.Ub(33,\"button\",0),core.cc(\"click\",(function(){return ctx.applyClick(\"2\")})),core.Kc(34),core.hc(35,\"translate\"),core.Tb(),core.Tb(),core.Ub(36,\"clr-datagrid\",2),core.cc(\"clrDgSelectedChange\",(function($event){return ctx.hostSelected=$event}))(\"clrDgRefresh\",(function(){return ctx.hostRefresh()})),core.Ub(37,\"clr-dg-column\",3),core.Kc(38),core.hc(39,\"translate\"),core.Tb(),core.Ub(40,\"clr-dg-column\",3),core.Kc(41),core.hc(42,\"translate\"),core.Tb(),core.Ub(43,\"clr-dg-column\",3),core.Kc(44),core.hc(45,\"translate\"),core.Tb(),core.Ic(46,BestpracticeComponent_clr_dg_row_46_Template,7,4,\"clr-dg-row\",5),core.Tb(),core.Tb(),core.Ub(47,\"div\",12),core.Ub(48,\"button\",13),core.cc(\"click\",(function(){return ctx.hostModalShow=!1})),core.Kc(49),core.hc(50,\"translate\"),core.Tb(),core.Tb(),core.Tb(),core.Tb(),core.Ub(51,\"clr-modal\",14),core.cc(\"clrModalOpenChange\",(function($event){return ctx.tipModal=$event})),core.Ub(52,\"h3\",10),core.Kc(53),core.hc(54,\"translate\"),core.Tb(),core.Ub(55,\"div\",11),core.Ub(56,\"p\"),core.Kc(57),core.hc(58,\"translate\"),core.Tb(),core.Tb(),core.Ub(59,\"div\",12),core.Ub(60,\"button\",15),core.cc(\"click\",(function(){return ctx.tipOk()})),core.Kc(61),core.hc(62,\"translate\"),core.Tb(),core.Tb(),core.Tb(),core.Ub(63,\"clr-modal\",14),core.cc(\"clrModalOpenChange\",(function($event){return ctx.tipModalSuccess=$event})),core.Ub(64,\"h3\",10),core.Kc(65),core.hc(66,\"translate\"),core.Tb(),core.Ub(67,\"div\",11),core.Pb(68,\"clr-icon\",16),core.Kc(69),core.hc(70,\"translate\"),core.Tb(),core.Ub(71,\"div\",12),core.Ub(72,\"button\",17),core.cc(\"click\",(function(){return ctx.tipModalSuccess=!1})),core.Kc(73),core.hc(74,\"translate\"),core.Tb(),core.Tb(),core.Tb(),core.Ub(75,\"clr-modal\",14),core.cc(\"clrModalOpenChange\",(function($event){return ctx.tipModalFail=$event})),core.Ub(76,\"h3\",10),core.Kc(77),core.hc(78,\"translate\"),core.Tb(),core.Ub(79,\"div\",11),core.Pb(80,\"clr-icon\",18),core.Kc(81),core.hc(82,\"translate\"),core.Tb(),core.Ub(83,\"div\",12),core.Ub(84,\"button\",19),core.cc(\"click\",(function(){return ctx.tipModalFail=!1})),core.Kc(85),core.hc(86,\"translate\"),core.Tb(),core.Tb(),core.Tb()),2&rf){const _r1=core.wc(24);core.Cb(2),core.mc(\"disabled\",0===ctx.rowSelected.length),core.Cb(1),core.Lc(core.ic(4,51,\"bestPractice.apply\")),core.Cb(3),core.Lc(core.ic(7,53,\"bestPractice.check\")),core.Cb(2),core.mc(\"clrDgSelected\",ctx.rowSelected)(\"clrDgLoading\",ctx.isLoading),core.Cb(1),core.mc(\"clrDgField\",\"hostSetting\"),core.Cb(1),core.Lc(core.ic(11,55,\"bestPractice.hostSetting\")),core.Cb(2),core.mc(\"clrDgField\",\"recommendValue\"),core.Cb(1),core.Lc(core.ic(14,57,\"bestPractice.recommend\")),core.Cb(2),core.mc(\"clrDgField\",\"level\"),core.Cb(1),core.Lc(core.ic(17,59,\"bestPractice.level\")),core.Cb(2),core.mc(\"clrDgField\",\"violation\")(\"clrDgSortOrder\",\"violation\"),core.Cb(1),core.Lc(core.ic(20,61,\"bestPractice.violation\")),core.Cb(2),core.mc(\"clrDgItemsOf\",ctx.list),core.Cb(2),core.mc(\"clrDgPageSize\",5)(\"clrDgTotalItems\",ctx.total),core.Cb(2),core.mc(\"clrPageSizeOptions\",core.pc(93,_c0)),core.Cb(1),core.Oc(\" \",_r1.firstItem+1,\" - \",_r1.lastItem+1,\" of \",_r1.totalItems,\" \"),core.Cb(1),core.mc(\"clrModalOpen\",ctx.hostModalShow),core.Cb(2),core.Lc(core.ic(30,63,\"bestPractice.non-compliant\")),core.Cb(4),core.mc(\"disabled\",0===ctx.hostSelected.length),core.Cb(1),core.Lc(core.ic(35,65,\"bestPractice.apply\")),core.Cb(2),core.mc(\"clrDgSelected\",ctx.hostSelected)(\"clrDgLoading\",ctx.hostIsLoading),core.Cb(1),core.mc(\"clrDgField\",\"hostName\"),core.Cb(1),core.Lc(core.ic(39,67,\"bestPractice.host\")),core.Cb(2),core.mc(\"clrDgField\",\"actualValue\"),core.Cb(1),core.Lc(core.ic(42,69,\"bestPractice.actual\")),core.Cb(2),core.mc(\"clrDgField\",\"recommendValue\"),core.Cb(1),core.Lc(core.ic(45,71,\"bestPractice.recommend\")),core.Cb(2),core.mc(\"clrDgItemsOf\",ctx.hostList),core.Cb(3),core.Lc(core.ic(50,73,\"menu.close\")),core.Cb(2),core.mc(\"clrModalOpen\",ctx.tipModal)(\"clrModalSize\",\"sm\"),core.Cb(2),core.Lc(core.ic(54,75,\"menu.tip\")),core.Cb(4),core.Nc(\"\",core.ic(58,77,\"bestPractice.tipmessage\"),\" \",ctx.ips,\"\"),core.Cb(4),core.Lc(core.ic(62,79,\"menu.ok\")),core.Cb(2),core.mc(\"clrModalOpen\",ctx.tipModalSuccess)(\"clrModalSize\",\"sm\"),core.Cb(2),core.Lc(core.ic(66,81,\"menu.tip\")),core.Cb(4),core.Mc(\"\",core.ic(70,83,\"bestPractice.exeSuccess\"),\" \"),core.Cb(4),core.Lc(core.ic(74,85,\"menu.ok\")),core.Cb(2),core.mc(\"clrModalOpen\",ctx.tipModalFail)(\"clrModalSize\",\"sm\"),core.Cb(2),core.Lc(core.ic(78,87,\"menu.tip\")),core.Cb(4),core.Mc(\"\",core.ic(82,89,\"bestPractice.exeFail\"),\" \"),core.Cb(4),core.Lc(core.ic(86,91,\"menu.ok\"))}},directives:[clr_angular.m,clr_angular.qb,clr_angular.sb,clr_angular.lb,clr_angular.tb,clr_angular.o,clr_angular.pb,clr_angular.r,clr_angular.q,clr_angular.u,clr_angular.t,clr_angular.J,clr_angular.K,clr_angular.B,clr_angular.v,clr_angular.rb,clr_angular.n,clr_angular.nb],pipes:[ngx_translate_core.c],styles:[\".color-square[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-bottom;height:.7rem;width:.7rem;border:.05rem solid #000;border-radius:2rem}\"],changeDetection:0}),BestpracticeComponent})()}];let bestpractice_routing_module_BestpracticeRoutingModule=(()=>{class BestpracticeRoutingModule{}return BestpracticeRoutingModule.ɵmod=core.Mb({type:BestpracticeRoutingModule}),BestpracticeRoutingModule.ɵinj=core.Lb({factory:function(t){return new(t||BestpracticeRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),BestpracticeRoutingModule})(),bestpractice_module_BestpracticeModule=(()=>{class BestpracticeModule{}return BestpracticeModule.ɵmod=core.Mb({type:BestpracticeModule}),BestpracticeModule.ɵinj=core.Lb({factory:function(t){return new(t||BestpracticeModule)},imports:[[shared_module.a,bestpractice_routing_module_BestpracticeRoutingModule]]}),BestpracticeModule})()}}]);","extractedComments":[]}