<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (c) 2012-2018 VMware, Inc. All rights reserved. -->
<!--
   dmestore plugin metadata.
   The <plugin> tag doesn't contain any moduleUri property because it is an HTML plugin.
-->

<plugin id="com.dmeplugin.dmestore.dmestore"
      defaultBundle="com_dmeplugin_dmestore">

   <resources baseUrl="locales/">
      <resource>com_dmeplugin_dmestore</resource>
   </resources>

   <dependencies>
      <!-- Allow HTML Client to display plugin icons in menus, shortcuts, object lists -->
      <dependency type="css" uri="dmestore/assets/css/plugin-icons.css" />
   </dependencies>

    <!-- Home view shortcut -->

   <extension id="com.dmeplugin.dmestore.homeShortcut">
      <extendedPoint>vise.home.shortcuts</extendedPoint>
      <object>
         <name>#{app.name}</name>
         <categoryUid>vsphere.core.controlcenter.monitoringCategory</categoryUid>
         <targetViewUid>com.dmeplugin.dmestore.mainView</targetViewUid>
      </object>
   </extension>

<!--入口设置 -->
   <extension id="com.dmeplugin.dmestore.entryPoint">
      <extendedPoint>vise.navigator.nodespecs</extendedPoint>
      <object>
         <title>dmeplugin</title>
         <parentUid>vsphere.core.navigator.solutionsCategory</parentUid>
         <navigationTargetUid>com.dmeplugin.dmestore.mainView</navigationTargetUid>
         <viewOpenedUponFocus className="com.vmware.ui.objectnavigator.views.CategoryNodeTreeView" />
      </object>
   </extension>

   <extension id="com.dmeplugin.dmestore.overview">
      <extendedPoint>vise.navigator.nodespecs</extendedPoint>
      <object>
         <title>Overview</title>
         <parentUid>com.dmeplugin.dmestore.entryPoint</parentUid>
         <navigationTargetUid>com.dmeplugin.dmestore.mainView</navigationTargetUid>
      </object>
   </extension>

   <extension id="com.dmeplugin.dmestore.storagelist">
      <extendedPoint>vise.navigator.nodespecs</extendedPoint>
      <object>
         <title>Storage Device</title>
         <parentUid>com.dmeplugin.dmestore.entryPoint</parentUid>
         <navigationTargetUid>com.dmeplugin.dmestore.mainView</navigationTargetUid>
      </object>
   </extension>

   <extension id="com.dmeplugin.dmestore.vmfsdatastorelist">
      <extendedPoint>vise.navigator.nodespecs</extendedPoint>
      <object>
         <title>VMFS Datastore</title>
         <parentUid>com.dmeplugin.dmestore.entryPoint</parentUid>
         <navigationTargetUid>com.dmeplugin.dmestore.mainView</navigationTargetUid>
      </object>
   </extension>

   <extension id="com.dmeplugin.dmestore.nfsdatastorelist">
      <extendedPoint>vise.navigator.nodespecs</extendedPoint>
      <object>
         <title>NFS Datastore</title>
         <parentUid>com.dmeplugin.dmestore.entryPoint</parentUid>
         <navigationTargetUid>com.dmeplugin.dmestore.mainView</navigationTargetUid>
      </object>
   </extension>

   <extension id="com.dmeplugin.dmestore.servicelevellist">
      <extendedPoint>vise.navigator.nodespecs</extendedPoint>
      <object>
         <title>Service Level</title>
         <parentUid>com.dmeplugin.dmestore.entryPoint</parentUid>
         <navigationTargetUid>com.dmeplugin.dmestore.mainView</navigationTargetUid>
      </object>
   </extension>

   <extension id="com.dmeplugin.dmestore.bestpractiselist">
      <extendedPoint>vise.navigator.nodespecs</extendedPoint>
      <object>
         <title>Best Practise</title>
         <parentUid>com.dmeplugin.dmestore.entryPoint</parentUid>
         <navigationTargetUid>com.dmeplugin.dmestore.mainView</navigationTargetUid>
      </object>
   </extension>



   <!--datastore summary中的新增portlet -->
   <extension id="com.dmeplugin.dmestore.datastore.summary">
      <extendedPoint>vsphere.core.datastore.summarySectionViews</extendedPoint>
      <object>
         <name>#{summaryView.title}</name>
         <contentSpec>
            <url>/ui/dmestore/resources/mainView.html</url>
            <dialogTitle>datastore Summary Sample</dialogTitle>
            <size>
               <width>1</width>
               <height>2</height>
            </size>
         </contentSpec>
      </object>
   </extension>


   <!-- Main view -->

   <extension id="com.dmeplugin.dmestore.mainView">
      <extendedPoint>vise.global.views</extendedPoint>
      <object>
         <name>#{app.name}</name>
         <componentClass className="com.vmware.vsphere.client.htmlbridge.HtmlView">
            <object>
               <root>
                  <url>/ui/dmestore/resources/mainView.html</url>
               </root>
            </object>
         </componentClass>
      </object>
   </extension>

   <!-- Host monitor sample view -->

   <extension id="com.dmeplugin.dmestore.host.monitor">
      <extendedPoint>vsphere.core.host.monitorViews</extendedPoint>
      <object>
         <name>#{monitorTab.label}</name>
         <componentClass className="com.vmware.vsphere.client.htmlbridge.HtmlView">
            <object>
               <root>
                  <url>/ui/dmestore/resources/host-monitor.html</url>
               </root>
            </object>
         </componentClass>
      </object>
   </extension>

   <!-- Sample Actions on Hosts -->

   <extension id="com.dmeplugin.dmestore.actionSet">
      <extendedPoint>vise.actions.sets</extendedPoint>
      <object>
         <actions>
            <com.vmware.actionsfw.ActionSpec>
               <uid>com.dmeplugin.dmestore.sampleAction1</uid>
               <label>#{sampleAction1.name}</label>
               <icon>#{addIcon}</icon>
               <delegate>
                  <className>com.vmware.vsphere.client.htmlbridge.HtmlActionDelegate</className>
                  <object><root>
                     <!-- actionUrl maps to ActionsController on the java side -->
                     <actionUrl>/ui/dmestore/rest/actions</actionUrl>
                  </root></object>
               </delegate>
            </com.vmware.actionsfw.ActionSpec>

             <com.vmware.actionsfw.ActionSpec>
               <uid>com.dmeplugin.dmestore.sampleAction2</uid>
               <label>#{sampleAction2.name}</label>
               <icon>#{editIcon}</icon>
               <delegate>
                  <className>com.vmware.vsphere.client.htmlbridge.HtmlActionDelegate</className>
                  <object><root>
                     <!-- actionUrl can be shared between several actions -->
                     <actionUrl>/ui/dmestore/rest/actions</actionUrl>
                  </root></object>
               </delegate>
            </com.vmware.actionsfw.ActionSpec>
          </actions>
      </object>
      <metadata>
         <objectType>HostSystem</objectType>
      </metadata>
   </extension>

   <!--
      This adds a sub-menu to the Host menu, using the actions defined above
   -->
   <extension id="com.dmeplugin.dmestore.hostMenu">
      <extendedPoint>vsphere.core.menus.solutionMenus</extendedPoint>
      <object>
         <!-- <label> is required here because it is an extension to an existing menu -->
         <label>#{sampleMenu.label}</label>
         <uid>com.dmeplugin.dmestore.hostMenu</uid>
         <children>
            <Array>
               <com.vmware.actionsfw.ActionMenuItemSpec>
                  <type>action</type>
                  <uid>com.dmeplugin.dmestore.sampleAction1</uid>
               </com.vmware.actionsfw.ActionMenuItemSpec>
               <com.vmware.actionsfw.ActionMenuItemSpec>
                  <type>action</type>
                  <uid>com.dmeplugin.dmestore.sampleAction2</uid>
               </com.vmware.actionsfw.ActionMenuItemSpec>
            </Array>
         </children>
      </object>
      <metadata>
         <objectType>HostSystem</objectType>
      </metadata>
   </extension>

</plugin>
